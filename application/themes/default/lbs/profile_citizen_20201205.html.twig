<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>{{title}}</title>
	{% include 'lbs/style.html.twig' %}
	<link rel="stylesheet" type="text/css" href="{{base_url()}}assets/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker-4.17.47.min.css">
	<link rel="stylesheet" type="text/css" href="{{base_url()}}assets/plugins/select2-4.0.13/dist/css/select2.min.css">
	<link rel="stylesheet" type="text/css" href="{{base_url()}}assets/plugins/select2-bootstrap4-theme/dist/select2-bootstrap4.min.css">
	<link rel="stylesheet" type="text/css" href="{{base_url()}}assets/css/prompt-style-font.css">
	<style type="text/css">
		.bd-placeholder-img{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
		input[type="file"],.datetimepicker{cursor:pointer}
		@media (min-width:768px){.bd-placeholder-img-lg{font-size:3.5rem}}
		.lh-condensed{line-height:1.25}
		#map1,#map2,#map3{height:300px}
		#map1_result,#map2_result,#map3_result{height:100px}
		.select2-container--bootstrap4 .select2-selection__clear{background-color:transparent;color:#777777}
		.select2-container--bootstrap4 .select2-selection__clear:hover{background-color:transparent;color:#333333}
	</style>
</head>
<body class="bg-light mt-5 mb-5"{% if functions == 'create' %} onload="policy_toggle()"{% endif %}>
	{% include 'lbs/navbar.html.twig' %}
	<form class="needs-validation" method="POST" novalidate enctype="multipart/form-data">
		<div class="container pt-5 pb-5">
			<div class="row">
				<div class="col">
					<div class="alert alert-{{status is defined and status == 1 ? 'success' : 'danger'}} alert-dismissible fade show {{status is defined ? 'd-block' : 'd-none'}} mt-3 mb-3" role="alert">
						<span class="alert-message">{{message}}</span>
						<button type="button" class="close" data-dismiss="alert" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="mb-3">
						{% if functions == 'create' %}
							<label class="user-select-none">คำแนะนำในการสมัครใช้งาน / Introduce for register.</label>
						{% endif %}
						<ul class="mb-0">
							<li class="user-select-none">กรุณากรอกข้อมูลตามความเป็นจริง / Please give us the truth information.</li>
							<li class="user-select-none">ในช่องที่มีเครื่องหมาย <span class="text-danger">*</span> เป็นช่องที่บังคับในการกรอกข้อมูล / Sign <span class="text-danger">*</span> required fields.</li>
						</ul>
					</div>
					<div class="accordion" id="accordion_01">
						<div class="card">
							<div class="card-header p-0 bg-danger" id="heading_01">
								<h4 class="h4 mb-0">
									<button class="btn btn-link btn-block text-left text-decoration-none text-white" type="button" data-toggle="collapse" data-target="#collapse_01" aria-expanded="true" aria-controls="collapse_01">
										<i class="fas fa-sign-in-alt"></i>
										<span>ข้อมูลสำหรับลงชื่อเข้าใช้ / Sign in information</span>
										<span class="clearfix">
											<div class="float-right">
												<i class="fas fa-minus"></i>
											</div>
										</span>
									</button>
								</h4>
							</div>
							<div id="collapse_01" class="collapse show" aria-labelledby="heading_01" data-parent="#accordion_01">
								<div class="card-body">
									<div class="form-row">
										<div class="col-lg mb-3">
											{% if functions == 'create' %}
												<label for="citizen_phone_number" class="user-select-none">หมายเลขโทรศัพท์ / Phone number: <small class="text-danger">*</small></label>
												<div class="input-group">
													<div class="input-group-prepend">
														<div class="input-group-text">
															<i class="fas fa-phone"></i>
														</div>
													</div>
													<input type="text" id="citizen_phone_number" name="citizen_phone_number" class="form-control" placeholder="ตัวอย่าง / Example: 0912345678" value="{{citizen.citizen_phone_number}}" maxlength="20" required>
													<div id="citizen_phone_number_feedback" class="invalid-feedback user-select-none">กรุณากรอกหมายเลขโทรศัพท์ / Please fill phone number.</div>
												</div>
											{% elseif functions == 'update' %}
												<label for="citizen_phone_number" class="user-select-none">หมายเลขโทรศัพท์ / Phone number: </label>
												<div class="input-group">
													<div class="input-group-prepend">
														<div class="input-group-text">
															<i class="fas fa-phone"></i>
														</div>
													</div>
													<input type="text" id="citizen_phone_number" class="form-control disabled" value="{{citizen.citizen_phone_number}}" disabled>
													<input type="hidden" name="citizen_phone_number" class="form-control" value="{{citizen.citizen_phone_number}}" maxlength="20" required readonly>
												</div>
											{% endif %}
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_email" class="user-select-none">อีเมล / Email: <small class="text-danger">*</small></label>
											<div class="input-group">
												<div class="input-group-prepend">
													<div class="input-group-text">
														<i class="fas fa-at"></i>
													</div>
												</div>
												<input type="email" id="citizen_email" name="citizen_email" class="form-control" placeholder="ตัวอย่าง / Example: you@email.com" value="{{citizen.citizen_email}}" maxlength="50" required>
											</div>
											<div id="citizen_email_feedback" class="invalid-feedback user-select-none">กรุณากรอกอีเมล / Please fill email.</div>
										</div>
									</div>
									{% if functions == 'create' %}
										<div class="form-row">
											<div class="col-lg mb-3">
												<label for="citizen_password" class="user-select-none">รหัสผ่าน / Password: <small class="text-danger">*</small></label>
												<div class="input-group">
													<div class="input-group-prepend">
														<div class="input-group-text">
															<i class="fas fa-key"></i>
														</div>
													</div>
													<input type="password" id="citizen_password" name="citizen_password" class="form-control" placeholder="ตัวอย่าง / Example: 0000" maxlength="4" required>
												</div>
												<div id="citizen_password_feedback" class="invalid-feedback user-select-none">กรุณากรอกรหัสผ่าน / Please fill password.</div>
												<div class="invalid-feedback user-select-none password-miss-match">กรุณากรอกรหัสผ่านให้ตรงกัน / Please fill password match with confirm.</div>
											</div>
											<div class="col-lg mb-3">
												<label for="citizen_password_confirm" class="user-select-none">ยืนยันรหัสผ่าน / Confirm password: <small class="text-danger">*</small></label>
												<div class="input-group">
													<div class="input-group-prepend">
														<div class="input-group-text">
															<i class="fas fa-key"></i>
														</div>
													</div>
													<input type="password" id="citizen_password_confirm" class="form-control" maxlength="4" required>
												</div>
												<div id="citizen_password_confirm_feedback" class="invalid-feedback user-select-none">กรุณายืนยันรหัสผ่าน / Please confirm password.</div>
												<div class="invalid-feedback user-select-none password-miss-match">กรุณากรอกรหัสผ่านให้ตรงกัน / Please fill password match with confirm.</div>
											</div>
										</div>
									{% elseif functions == 'update' %}
										<div class="form-row">
											<div class="col-lg mb-3">
												<label for="citizen_password_old" class="user-select-none">รหัสผ่านปัจจุบัน / Current password: </label>
												<div class="input-group">
													<div class="input-group-prepend">
														<div class="input-group-text">
															<i class="fas fa-key"></i>
														</div>
													</div>
													<input type="password" id="citizen_password_old" name="citizen_password_old" class="form-control" maxlength="4">
												</div>
												<div id="citizen_password_old_feedback" class="invalid-feedback user-select-none">กรุณากรอกรหัสผ่านปัจจุบัน / Please fill current password.</div>
											</div>
											<div class="col-lg mb-3">
												<label for="citizen_password" class="user-select-none">รหัสผ่านใหม่ / New password: </label>
												<div class="input-group">
													<div class="input-group-prepend">
														<div class="input-group-text">
															<i class="fas fa-key"></i>
														</div>
													</div>
													<input type="password" id="citizen_password" name="citizen_password" class="form-control" placeholder="ตัวอย่าง / Example: 0000" maxlength="4">
												</div>
												<div id="citizen_password_feedback" class="invalid-feedback user-select-none">กรุณากรอกรหัสผ่านใหม่ / Please fill new password.</div>
												<div class="invalid-feedback user-select-none password-miss-match">กรุณากรอกรหัสผ่านให้ตรงกัน / Please fill password match with confirm.</div>
											</div>
											<div class="col-lg mb-3">
												<label for="citizen_password_confirm" class="user-select-none">ยืนยันรหัสผ่านใหม่ / Confirm new password: </label>
												<div class="input-group">
													<div class="input-group-prepend">
														<div class="input-group-text">
															<i class="fas fa-key"></i>
														</div>
													</div>
													<input type="password" id="citizen_password_confirm" class="form-control" maxlength="4">
												</div>
												<div id="citizen_password_confirm_feedback" class="invalid-feedback user-select-none">กรุณายืนยันรหัสผ่าน / Please confirm password.</div>
												<div class="invalid-feedback user-select-none password-miss-match">กรุณากรอกรหัสผ่านให้ตรงกัน / Please fill password match with confirm.</div>
											</div>
										</div>
										<div class="form-row">
											<div class="col-lg">
												<small class="form-text text-muted user-select-none">หากไม่ต้องการเปลี่ยนรหัสผ่านให้เว้นข้อมูลส่วนนี้ไว้ / Leave this blank, if you don't want to change password.</small>
											</div>
										</div>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
					<div class="accordion" id="accordion_02">
						<div class="card">
							<div class="card-header p-0 bg-danger" id="heading_02">
								<h4 class="h4 mb-0">
									<button class="btn btn-link btn-block text-left text-decoration-none text-white" type="button" data-toggle="collapse" data-target="#collapse_02" aria-expanded="true" aria-controls="collapse_02">
										<i class="fas fa-portrait"></i>
										<span>ข้อมูลส่วนตัว / Personal information</span>
										<span class="clearfix">
											<div class="float-right">
												<i class="fas fa-plus"></i>
											</div>
										</span>
									</button>
								</h4>
							</div>
							<div id="collapse_02" class="collapse" aria-labelledby="heading_02" data-parent="#accordion_02">
								<div class="card-body">
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="citizen_title" class="user-select-none">คำนำหน้าชื่อ / Prefix:</label>
											<div class="mt-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_title_mr" name="citizen_title" class="custom-control-input" value="1"{% if citizen.info.citizen_title == '1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_title_mr">นาย / Mr.</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_title_mrs" name="citizen_title" class="custom-control-input" value="2"{% if citizen.info.citizen_title == '2' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_title_mrs">นาง / Mrs.</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_title_ms" name="citizen_title" class="custom-control-input" value="3"{% if citizen.info.citizen_title == '3' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_title_ms">นางสาว / Ms.</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_title_other" name="citizen_title" class="custom-control-input" value="-1"{% if citizen.info.citizen_title == '-1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_title_other">อื่นๆ / Other</label>
												</div>
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="citizen_name" class="user-select-none">ชื่อ / First name: </label>
											<input type="text" id="citizen_name" name="citizen_name" class="form-control" value="{{citizen.citizen_name}}" maxlength="50">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_middle" class="user-select-none">ชื่อกลาง / Middle name: </label>
											<input type="text" id="citizen_middle" name="citizen_middle" class="form-control" value="{{citizen.citizen_middle}}" maxlength="50">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_surname" class="user-select-none">นามสกุล / Last name: </label>
											<input type="text" id="citizen_surname" name="citizen_surname" class="form-control" value="{{citizen.citizen_surname}}" maxlength="50">
										</div>
										<div class="col-lg mb-3">
											<label for="brithday" class="user-select-none">วันเดือนปีเกิด / Date of birth:</label>
											<input type="text" id="brithday" name="brithday" class="form-control datetimepicker left bottom" value="{{citizen.info.brithday}}" autocomplete="off">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg-6 mb-3">
											<label for="gender" class="user-select-none">เพศ / Gender:</label>
											<div class="mt-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="gender_m" name="gender" class="custom-control-input" value="Male"{% if citizen.info.gender == 'Male' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="gender_m">ชาย / Male</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="gender_fme" name="gender" class="custom-control-input" value="Female"{% if citizen.info.gender == 'Female' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="gender_fme">หญิง / Female</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="gender_tgdr" name="gender" class="custom-control-input" value="-1"{% if citizen.info.gender == '-1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="gender_tgdr">อื่นๆ / Other</label>
												</div>
											</div>
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_height" class="user-select-none">ส่วนสูง (ซม.) / Height (cm.): </label>
											<input type="number" id="citizen_height" name="citizen_height" class="form-control" placeholder="ตัวอย่าง / Example: 170" value="{{citizen.info.citizen_height}}" min="1" max="9999">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_weight" class="user-select-none">น้ำหนัก (กก.) / Weight (kgs.): </label>
											<input type="number" id="citizen_weight" name="citizen_weight" class="form-control" placeholder="ตัวอย่าง / Example: 65" value="{{citizen.info.citizen_weight}}" min="1" max="9999">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg-6 mb-3">
											<label for="group_blood" class="user-select-none">หมู่โลหิต / Blood type: </label>
											<div class="mt-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="group_blood_a" name="group_blood" class="custom-control-input" value="A"{% if citizen.info.group_blood == 'A' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="group_blood_a">A</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="group_blood_b" name="group_blood" class="custom-control-input" value="B"{% if citizen.info.group_blood == 'B' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="group_blood_b">B</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="group_blood_ab" name="group_blood" class="custom-control-input" value="AB"{% if citizen.info.group_blood == 'AB' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="group_blood_ab">AB</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="group_blood_o" name="group_blood" class="custom-control-input" value="O"{% if citizen.info.group_blood == 'O' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="group_blood_o">O</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="group_blood_other" name="group_blood" class="custom-control-input" value="-1"{% if citizen.info.group_blood == '-1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="group_blood_other">อื่นๆ / Other</label>
												</div>
											</div>
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_religion" class="user-select-none">ศาสนา / Religion: </label>
											<input type="text" id="citizen_religion" name="citizen_religion" class="form-control" value="{{citizen.info.citizen_religion}}">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_scar" class="user-select-none">ตำหนิ / Scar: </label>
											<input type="text" id="citizen_scar" name="citizen_scar" class="form-control" value="{{citizen.info.citizen_scar}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg-6 mb-3">
											<label for="citizen_handicapped" class="user-select-none">เป็นผู้พิการ / Handicapped: </label>
											<div class="mt-2">
												<div class="custom-control custom-checkbox custom-control-inline">
													<input type="checkbox" id="citizen_handicapped" name="citizen_handicapped" class="custom-control-input" value="Y"{% if citizen.info.citizen_handicapped == 'Y' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_handicapped">ใช่ / Yes</label>
												</div>
											</div>
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_nationality" class="user-select-none">สัญชาติ / Nationality: </label>
											<input type="text" id="citizen_nationality" name="citizen_nationality" class="form-control" value="{{citizen.info.citizen_nationality}}">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_citizenship" class="user-select-none">เชื้อชาติ / Citizenship: </label>
											<input type="text" id="citizen_citizenship" name="citizen_citizenship" class="form-control" value="{{citizen.info.citizen_citizenship}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg-6 mb-3">
											<label for="citizen_id" class="user-select-none">เลขประจำตัวประชาชน: </label>
											<input type="text" id="citizen_id" name="citizen_id" class="form-control" placeholder="ตัวอย่าง: 0000000000000" value="{{citizen.citizen_id}}" maxlength="20">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_passport" class="user-select-none">Passport number: </label>
											<input type="text" id="citizen_passport" name="citizen_passport" class="form-control" value="{{citizen.info.citizen_passport}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label class="user-select-none">ภาพประจำตัว / Profile photo: </label>
											<div class="input-group">
												<div class="custom-file">
													<input type="file" id="citizen_photo" name="citizen_photo" class="custom-file-input" accept="image/*">
													<label class="custom-file-label" for="citizen_photo">เลือกไฟล์ / Choose file</label>
												</div>
												<div class="input-group-append">
													<button class="btn btn-secondary" type="button" onclick="empty_url('citizen_photo')"><i class="far fa-times-circle"></i></button>
												</div>
											</div>
											<div class="mt-0 mb-3">
												<img id="citizen_photo_preview" class="photo-preview w-100 mx-auto d-block"{% if citizen.info.citizen_photo != '' %} src="{{citizen.info.citizen_photo}}"{% endif %}>
											</div>
											<ul class="mb-0">
												<li><small class="form-text text-muted user-select-none">ควรตั้งชื่อไฟล์เป็นภาษาอังกฤษ / Please use file name in English.</small></li>
												<li><small class="form-text text-muted user-select-none">ท่านสามารถแนบเอกสาร ที่มีนามสกุลไฟล์ในลักษณะดังต่อไปนี้ .jpg., .png โดยขนาดไฟล์ไม่ควรเกิน 1,024 kb. / You can attachment .jpg, .png and size file should less than 1,024 kb.</small></li>
												<li><small class="form-text text-muted user-select-none">หากต้องการจะลบไฟล์แนบ ให้คลิกที่ไอคอน <i class="far fa-times-circle"></i> / If you want to delete file, you can click icon <i class="far fa-times-circle"></i></small></li>
											</ul>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="accordion" id="accordion_07">
						<div class="card">
							<div class="card-header p-0 bg-danger" id="heading_07">
								<h4 class="h4 mb-0">
									<button class="btn btn-link btn-block text-left text-decoration-none text-white" type="button" data-toggle="collapse" data-target="#collapse_07" aria-expanded="true" aria-controls="collapse_07">
										<i class="fas fa-notes-medical"></i>
										<span>ข้อมูลสุขภาพ / Health information</span>
										<span class="clearfix">
											<div class="float-right">
												<i class="fas fa-plus"></i>
											</div>
										</span>
									</button>
								</h4>
							</div>
							<div id="collapse_07" class="collapse" aria-labelledby="heading_07" data-parent="#accordion_07">
								<div class="card-body">
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="illness_history" class="user-select-none">โรคประจำตัว / Congenital disease: </label>
											<input type="text" id="illness_history" name="illness_history" class="form-control" value="{{citizen.info.illness_history}}">
										</div>
										<div class="col-lg mb-3">
											<label for="drug_allergy" class="user-select-none">แพ้ยา / Drug allergy: </label>
											<input type="text" id="drug_allergy" name="drug_allergy" class="form-control" value="{{citizen.info.drug_allergy}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="hospital" class="user-select-none">โรงพยาบาลที่รับการรักษาประจำ / Regular treatment hospital: </label>other
											<input type="text" id="hospital" name="hospital" class="form-control" value="{{citizen.info.hospital}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="other" class="user-select-none">ประวัติรับการรักษา / Illness history: </label>
											<textarea id="other" name="other" class="form-control">{{citizen.info.other}}</textarea>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="accordion" id="accordion_03">
						<div class="card">
							<div class="card-header p-0 bg-danger" id="heading_03">
								<h4 class="h4 mb-0">
									<button class="btn btn-link btn-block text-left text-decoration-none text-white" type="button" data-toggle="collapse" data-target="#collapse_03" aria-expanded="true" aria-controls="collapse_03">
										<i class="far fa-address-card"></i>
										<span>ข้อมูลที่อยู่ติดต่อ / Contact information</span>
										<span class="clearfix">
											<div class="float-right">
												<i class="fas fa-plus"></i>
											</div>
										</span>
									</button>
								</h4>
							</div>
							<div id="collapse_03" class="collapse" aria-labelledby="heading_03" data-parent="#accordion_03">
								<div class="card-body">
									<h5 class="h5 mb-2 user-select-none">ที่อยู่ตามทะเบียนบ้าน / Permanent address</h5>
									<div class="form-row">
										<div class="col-lg mb-3">
											<div id="map1" class="border rounded">
												<div class="m-2"><i class="fas fa-spinner fa-spin"></i> กำลังโหลด... / Loading...</div>
											</div>
											<ul class="mb-0">
												<li><small class="form-text text-muted user-select-none">ปักหมุดที่อยู่ตามทะเบียนบ้านลงบนแผนที่ / Mark your permanent address on map.</small></li>
												<li><small class="form-text text-muted user-select-none">สามารถค้นหาสถานที่ได้ในช่องค้นหาสถานที่ / You can search location on "Location search".</small></li>
											</ul>
											<div class="form-group mb-0">
												<label class="mt-2">ค้นหาสถานที่ / Location search: </label>
												<div class="input-group">
													<input type="text" class="form-control" id="map1_search" placeholder="กรอกอย่างน้อย 3 ตัวอักษร / Enter at least 3 characters">
													<div class="input-group-append">
														<button id="map1_submit" class="btn btn-secondary" type="button" title="Search">
															<i class="fas fa-search"></i>
														</button>
													</div>
												</div>
												<input type="hidden" id="map1_area">
												<input type="hidden" id="map1_tag">
												<input type="hidden" id="map1_span">
												<input type="hidden" id="map1_limit" value="20">
												<div id="map1_result" class="mt-2 rounded border overflow-auto"></div>
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg-4 mb-3">
											<label for="citizen_pmnt_no" class="user-select-none">บ้านเลขที่ / House no.: </label>
											<input type="text" id="citizen_pmnt_no" name="citizen_pmnt_no" class="form-control" value="{{citizen.info.citizen_pmnt_no}}">
										</div>
										<div class="col-lg-8 mb-3">
											<label for="citizen_pmnt_address" class="user-select-none">อาคาร/ตรอก/ซอย/ถนน / Building/Lane/Alley/Road: </label>
											<input type="text" id="citizen_pmnt_address" name="citizen_pmnt_address" class="form-control" value="{{citizen.info.citizen_pmnt_address}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg-4 mb-3">
											<label for="citizen_pmnt_subdistrict" class="user-select-none">แขวง/ตำบล / Sub-district: </label>
											<input type="text" id="citizen_pmnt_subdistrict" name="citizen_pmnt_subdistrict" class="form-control" value="{{citizen.info.citizen_pmnt_subdistrict}}">
										</div>
										<div class="col-lg-4 mb-3">
											<label for="citizen_pmnt_district" class="user-select-none">เขต/อำเภอ / District: </label>
											<input type="text" id="citizen_pmnt_district" name="citizen_pmnt_district" class="form-control" value="{{citizen.info.citizen_pmnt_district}}">
										</div>
										<div class="col-lg-4 mb-3">
											<label for="citizen_pmnt_province" class="user-select-none">จังหวัด / Province/City: </label>
											<input type="text" id="citizen_pmnt_province" name="citizen_pmnt_province" class="form-control" value="{{citizen.info.citizen_pmnt_province}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg-4 mb-3">
											<label for="citizen_pmnt_postcode" class="user-select-none">รหัสไปรษณีย์ / Postcode: </label>
											<input type="text" id="citizen_pmnt_postcode" name="citizen_pmnt_postcode" class="form-control" value="{{citizen.info.citizen_pmnt_postcode}}">
										</div>
										<div class="col-lg-4 mb-3">
											<label for="citizen_pmnt_country" class="user-select-none">ประเทศ / Country: </label>
											<input type="text" id="citizen_pmnt_country" name="citizen_pmnt_country" class="form-control" value="{{citizen.info.citizen_pmnt_country}}">
										</div>
										{% if sub_functions == 'read' %}
											<div class="col-lg-4 mb-3">
												<label class="user-select-none">&nbsp;</label>
												<div class="form-group mb-0">
													<a class="btn btn-dark text-white" type="button" onclick="send_location('citizen_pmnt_lat','citizen_pmnt_lon')">Send location</a>
												</div>
											</div>
										{% endif %}
									</div>
									<hr class="mt-2 mb-4">
									<h5 class="h5 mb-2 user-select-none">ที่อยู่ปัจจุบัน / Current address</h5>
									<div class="form-row">
										<div class="col-lg mb-3">
											<div class="">
												<div class="custom-control custom-checkbox">
													<input type="checkbox" id="citizen_use_pmnt_addr" name="citizen_use_pmnt_addr" class="custom-control-input" data-toggle="collapse" data-target="#collapse_use_pmnt_addr" aria-expanded="false" aria-controls="collapse_use_pmnt_addr"{% if citizen.info.citizen_use_pmnt_addr == 1 %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_use_pmnt_addr">ใช้ที่อยู่ตามทะเบียนบ้าน / Use permanent address</label>
												</div>
											</div>
										</div>
									</div>
									<div class="collapse{{(functions == 'update' and citizen.info.citizen_use_pmnt_addr == 0) or functions == 'create' ? ' show in' : ''}}" id="collapse_use_pmnt_addr">
										<div class="form-row">
											<div class="col-lg mb-3">
												<div id="map2" class="border rounded">
													<div class="m-2"><i class="fas fa-spinner fa-spin"></i> กำลังโหลด... / Loading...</div>
												</div>
												<ul class="mb-0">
													<li><small class="form-text text-muted user-select-none">ปักหมุดที่อยู่ปัจจุบันลงบนแผนที่ / Mark your current address on map.</small></li>
													<li><small class="form-text text-muted user-select-none">สามารถค้นหาสถานที่ได้ในช่องค้นหาสถานที่ / You can search location on "Location search".</small></li>
												</ul>
												<div class="form-group mb-0">
													<label class="mt-2">ค้นหาสถานที่ / Location search: </label>
													<div class="input-group">
														<input type="text" class="form-control" id="map2_search" placeholder="กรอกอย่างน้อย 3 ตัวอักษร / Enter at least 3 characters">
														<div class="input-group-append">
															<button id="map2_submit" class="btn btn-secondary" type="button" title="Search">
																<i class="fas fa-search"></i>
															</button>
														</div>
													</div>
													<input type="hidden" id="map2_area">
													<input type="hidden" id="map2_tag">
													<input type="hidden" id="map2_span">
													<input type="hidden" id="map2_limit" value="20">
													<div id="map2_result" class="mt-2 rounded border overflow-auto"></div>
												</div>
											</div>
										</div>
										<div class="form-row">
											<div class="col-lg-4 mb-3">
												<label for="citizen_home_no" class="user-select-none">บ้านเลขที่ / House no.: </label>
												<input type="text" id="citizen_home_no" name="citizen_home_no" class="form-control" value="{{citizen.address[0].citizen_home_no}}">
											</div>
											<div class="col-lg-8 mb-3">
												<label for="citizen_home_address" class="user-select-none">อาคาร/ตรอก/ซอย/ถนน / Building/Lane/Alley/Road: </label>
												<input type="text" id="citizen_home_address" name="citizen_home_address" class="form-control" value="{{citizen.address[0].citizen_home_address}}">
											</div>
										</div>
										<div class="form-row">
											<div class="col-lg-4 mb-3">
												<label for="citizen_home_subdistrict" class="user-select-none">แขวง/ตำบล / Sub-district: </label>
												<input type="text" id="citizen_home_subdistrict" name="citizen_home_subdistrict" class="form-control" value="{{citizen.address[0].citizen_home_subdistrict}}">
											</div>
											<div class="col-lg-4 mb-3">
												<label for="citizen_home_district" class="user-select-none">เขต/อำเภอ / District: </label>
												<input type="text" id="citizen_home_district" name="citizen_home_district" class="form-control" value="{{citizen.address[0].citizen_home_district}}">
											</div>
											<div class="col-lg-4 mb-3">
												<label for="citizen_home_province" class="user-select-none">จังหวัด / Province/City: </label>
												<input type="text" id="citizen_home_province" name="citizen_home_province" class="form-control" value="{{citizen.address[0].citizen_home_province}}">
											</div>
										</div>
										<div class="form-row">
											<div class="col-lg-4 mb-3">
												<label for="citizen_home_postcode" class="user-select-none">รหัสไปรษณีย์ / Postcode: </label>
												<input type="text" id="citizen_home_postcode" name="citizen_home_postcode" class="form-control" value="{{citizen.address[0].citizen_home_postcode}}">
											</div>
											<div class="col-lg-4 mb-3">
												<label for="citizen_home_country" class="user-select-none">ประเทศ / Country: </label>
												<input type="text" id="citizen_home_country" name="citizen_home_country" class="form-control" value="{{citizen.address[0].citizen_home_country}}">
											</div>
											{% if sub_functions == 'read' %}
												<div class="col-lg-4 mb-3">
													<label class="user-select-none">&nbsp;</label>
													<div class="form-group mb-0">
														<a class="btn btn-dark text-white" type="button" onclick="send_location('citizen_home_lat','citizen_home_lon')">Send location</a>
													</div>
												</div>
											{% endif %}
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="accordion" id="accordion_04">
						<div class="card">
							<div class="card-header p-0 bg-danger" id="heading_04">
								<h4 class="h4 mb-0">
									<button class="btn btn-link btn-block text-left text-decoration-none text-white" type="button" data-toggle="collapse" data-target="#collapse_04" aria-expanded="true" aria-controls="collapse_04">
										<i class="fas fa-address-card"></i>
										<span>บุคคลที่ติดต่อกรณีฉุกเฉิน / Person to contact in emergency</span>
										<span class="clearfix">
											<div class="float-right">
												<i class="fas fa-plus"></i>
											</div>
										</span>
									</button>
								</h4>
							</div>
							<div id="collapse_04" class="collapse" aria-labelledby="heading_04" data-parent="#accordion_04">
								<div class="card-body">
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="contact_name" class="user-select-none">ชื่อ / First name: </label>
											<input type="text" id="contact_name" name="contact_name" class="form-control" value="{{citizen.info.contact_name}}">
										</div>
										<div class="col-lg mb-3">
											<label for="contact_surname" class="user-select-none">นามสกุล / Last name: </label>
											<input type="text" id="contact_surname" name="contact_surname" class="form-control" value="{{citizen.info.contact_surname}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="contact_phone_number" class="user-select-none">หมายเลขโทรศัพท์ / Phone number: </label>
											<input type="text" id="contact_phone_number" name="contact_phone_number" class="form-control" value="{{citizen.info.contact_phone_number}}">
										</div>
										<div class="col-lg mb-3">
											<label for="contact_occupation" class="user-select-none">อาชีพ / Occupation: </label>
											<input type="text" id="contact_occupation" name="contact_occupation" class="form-control" value="{{citizen.info.contact_occupation}}">
										</div>
										<div class="col-lg mb-3">
											<label for="contact_relationship" class="user-select-none">ความสัมพันธ์ / Relationship: </label>
											<input type="text" id="contact_relationship" name="contact_relationship" class="form-control" value="{{citizen.info.contact_relationship}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="contact_address" class="user-select-none">สถานที่ติดต่อ / Contact address: </label>
											<input type="text" id="contact_address" name="contact_address" class="form-control" value="{{citizen.info.contact_address}}">
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="accordion" id="accordion_05">
						<div class="card">
							<div class="card-header p-0 bg-danger" id="heading_05">
								<h4 class="h4 mb-0">
									<button class="btn btn-link btn-block text-left text-decoration-none text-white" type="button" data-toggle="collapse" data-target="#collapse_05" aria-expanded="true" aria-controls="collapse_05">
										<i class="fas fa-users"></i>
										<span>ข้อมูลครอบครัว / Family information</span>
										<span class="clearfix">
											<div class="float-right">
												<i class="fas fa-plus"></i>
											</div>
										</span>
									</button>
								</h4>
							</div>
							<div id="collapse_05" class="collapse" aria-labelledby="heading_05" data-parent="#accordion_05">
								<div class="card-body">
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="citizen_ft_title" class="h5 mb-2 user-select-none">บิดา / Father: </label>
											<div class="mt-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_ft_title_mr" name="citizen_ft_title" class="custom-control-input" value="1"{% if citizen.info.citizen_ft_title == '1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_ft_title_mr">นาย / Mr.</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_ft_title_other" name="citizen_ft_title" class="custom-control-input" value="-1"{% if citizen.info.citizen_ft_title == '-1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_ft_title_other">อื่นๆ / Other</label>
												</div>
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="citizen_ft_name" class="user-select-none">ชื่อ / First name: </label>
											<input type="text" id="citizen_ft_name" name="citizen_ft_name" class="form-control" value="{{citizen.info.citizen_ft_name}}">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_ft_surname" class="user-select-none">นามสกุล / Last name: </label>
											<input type="text" id="citizen_ft_surname" name="citizen_ft_surname" class="form-control" value="{{citizen.info.citizen_ft_surname}}">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_ft_birthday" class="user-select-none">วันเดือนปีเกิด / Date of birth:</label>
											<input type="text" id="citizen_ft_birthday" name="citizen_ft_birthday" class="form-control datetimepicker left top" value="{{citizen.info.citizen_ft_birthday}}" autocomplete="off">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_ft_occupation" class="user-select-none">อาชีพ / Occupation:</label>
											<input type="text" id="citizen_ft_occupation" name="citizen_ft_occupation" class="form-control" value="{{citizen.info.citizen_ft_occupation}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="citizen_ft_status" class="user-select-none">สถานะ / Status:</label>
											<div class="mt-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_ft_status_al" name="citizen_ft_status" class="custom-control-input" value="1"{% if citizen.info.citizen_ft_status == '1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_ft_status_al">มีชีวิตอยู่ / Alive</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_ft_status_pa" name="citizen_ft_status" class="custom-control-input" value="2"{% if citizen.info.citizen_ft_status == '2' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_ft_status_pa">ถึงแก่กรรม / Pass away</label>
												</div>
											</div>
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_blood" class="user-select-none">หมู่โลหิต / Blood type: </label>
											<div class="mt-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_a_ft" name="citizen_blood_ft" class="custom-control-input" value="A"{% if citizen.info.citizen_blood_ft == 'A' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_a_ft">A</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_b_ft" name="citizen_blood_ft" class="custom-control-input" value="B"{% if citizen.info.citizen_blood_ft == 'B' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_b_ft">B</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_ab_ft" name="citizen_blood_ft" class="custom-control-input" value="AB"{% if citizen.info.citizen_blood_ft == 'AB' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_ab_ft">AB</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_o_ft" name="citizen_blood_ft" class="custom-control-input" value="O"{% if citizen.info.citizen_blood_ft == 'O' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_o_ft">O</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_other_ft" name="citizen_blood_ft" class="custom-control-input" value="-1"{% if citizen.info.citizen_blood_ft == '-1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_other_ft">อื่นๆ / Other</label>
												</div>
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="congenital_disease_ft" class="user-select-none">โรคประจำตัว / Congenital disease: </label>
											<input type="text" id="congenital_disease_ft" name="congenital_disease_ft" class="form-control" value="{{citizen.info.congenital_disease_ft}}">
										</div>
										<div class="col-lg mb-3">
											<label for="drug_allergy_ft" class="user-select-none">แพ้ยา / Drug allergy: </label>
											<input type="text" id="drug_allergy_ft" name="drug_allergy_ft" class="form-control" value="{{citizen.info.drug_allergy_ft}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="regular_hospital_ft" class="user-select-none">โรงพยาบาลที่รับการรักษาประจำ / Regular treatment hospital: </label>
											<input type="text" id="regular_hospital_ft" name="regular_hospital_ft" class="form-control" value="{{citizen.info.regular_hospital_ft}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="illness_history_ft" class="user-select-none">ประวัติรับการรักษา / Illness history: </label>
											<textarea id="illness_history_ft" name="illness_history_ft" class="form-control">{{citizen.info.illness_history_ft}}</textarea>
										</div>
									</div>
									{% if sub_functions == 'read' %}
										<div class="form-row">
											<div class="col-lg mb-3">
												<div class="form-group mb-0">
													<a class="btn btn-dark text-white" type="button" onclick="send_medical('ft')">ส่งข้อมูลทางการแพทย์</a>
												</div>
											</div>
										</div>
									{% endif %}
									<hr class="mt-2 mb-4">
									<div class="form-row">
										<div class="col-lg-8 mb-3">
											<label for="citizen_mt_title" class="h5 mb-2 user-select-none">มารดา / Mother: </label>
											<div class="mt-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_mt_title_mrs" name="citizen_mt_title" class="custom-control-input" value="2"{% if citizen.info.citizen_mt_title == '2' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_mt_title_mrs">นาง / Mrs.</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_mt_title_ms" name="citizen_mt_title" class="custom-control-input" value="3"{% if citizen.info.citizen_mt_title == '3' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_mt_title_ms">นางสาว / Ms.</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_mt_title_other" name="citizen_mt_title" class="custom-control-input" value="-1"{% if citizen.info.citizen_mt_title == '-1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_mt_title_other">อื่นๆ / Other</label>
												</div>
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="citizen_mt_name" class="user-select-none">ชื่อ / First name: </label>
											<input type="text" id="citizen_mt_name" name="citizen_mt_name" class="form-control" value="{{citizen.info.citizen_mt_name}}">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_mt_surname" class="user-select-none">นามสกุล / Last name: </label>
											<input type="text" id="citizen_mt_surname" name="citizen_mt_surname" class="form-control" value="{{citizen.info.citizen_mt_surname}}">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_mt_birthday" class="user-select-none">วันเดือนปีเกิด / Date of birth:</label>
											<input type="text" id="citizen_mt_birthday" name="citizen_mt_birthday" class="form-control datetimepicker left top" value="{{citizen.info.citizen_mt_birthday}}" autocomplete="off">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_mt_occupation" class="user-select-none">อาชีพ / Occupation:</label>
											<input type="text" id="citizen_mt_occupation" name="citizen_mt_occupation" class="form-control" value="{{citizen.info.citizen_mt_occupation}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="citizen_mt_status" class="user-select-none">สถานะ / Status:</label>
											<div class="mt-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_mt_status_al" name="citizen_mt_status" class="custom-control-input" value="1"{% if citizen.info.citizen_mt_status == '1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_mt_status_al">มีชีวิตอยู่ / Alive</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_mt_status_pa" name="citizen_mt_status" class="custom-control-input" value="2"{% if citizen.info.citizen_mt_status == '2' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_mt_status_pa">ถึงแก่กรรม / Pass away</label>
												</div>
											</div>
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_blood" class="user-select-none">หมู่โลหิต / Blood type: </label>
											<div class="mt-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_a_mt" name="citizen_blood_mt" class="custom-control-input" value="A"{% if citizen.info.citizen_blood_mt == 'A' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_a_mt">A</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_b_mt" name="citizen_blood_mt" class="custom-control-input" value="B"{% if citizen.info.citizen_blood_mt == 'B' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_b_mt">B</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_ab_mt" name="citizen_blood_mt" class="custom-control-input" value="AB"{% if citizen.info.citizen_blood_mt == 'AB' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_ab_mt">AB</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_o_mt" name="citizen_blood_mt" class="custom-control-input" value="O"{% if citizen.info.citizen_blood_mt == 'O' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_o_mt">O</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_other_mt" name="citizen_blood_mt" class="custom-control-input" value="-1"{% if citizen.info.citizen_blood_mt == '-1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_other_mt">อื่นๆ / Other</label>
												</div>
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="congenital_disease_mt" class="user-select-none">โรคประจำตัว / Congenital disease: </label>
											<input type="text" id="congenital_disease_mt" name="congenital_disease_mt" class="form-control" value="{{citizen.info.congenital_disease_mt}}">
										</div>
										<div class="col-lg mb-3">
											<label for="drug_allergy_mt" class="user-select-none">แพ้ยา / Drug allergy: </label>
											<input type="text" id="drug_allergy_mt" name="drug_allergy_mt" class="form-control" value="{{citizen.info.drug_allergy_mt}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="regular_hospital_mt" class="user-select-none">โรงพยาบาลที่รับการรักษาประจำ / Regular treatment hospital: </label>
											<input type="text" id="regular_hospital_mt" name="regular_hospital_mt" class="form-control" value="{{citizen.info.regular_hospital_mt}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="illness_history_mt" class="user-select-none">ประวัติรับการรักษา / Illness history: </label>
											<textarea id="illness_history_mt" name="illness_history_mt" class="form-control">{{citizen.info.illness_history_mt}}</textarea>
										</div>
									</div>
									{% if sub_functions == 'read' %}
										<div class="form-row">
											<div class="col-lg mb-3">
												<div class="form-group mb-0">
													<a class="btn btn-dark text-white" type="button" onclick="send_medical('mt')">ส่งข้อมูลทางการแพทย์</a>
												</div>
											</div>
										</div>
									{% endif %}
									<hr class="mt-2 mb-4">
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="citizen_marital" class="h5 mb-2 user-select-none">สถานะภาพครอบครัว / Marital status: </label>
											<div class="mt-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_single" name="citizen_marital" class="custom-control-input" value="1"{% if citizen.info.citizen_marital == '1' %} checked{% endif %}>
													<label class="custom-control-label" for="citizen_single">โสด / Single</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_married" name="citizen_marital" class="custom-control-input" value="2"{% if citizen.info.citizen_marital == '2' %} checked{% endif %}>
													<label class="custom-control-label" for="citizen_married">สมรส / Married</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_devorced" name="citizen_marital" class="custom-control-input" value="3"{% if citizen.info.citizen_marital == '3' %} checked{% endif %}>
													<label class="custom-control-label" for="citizen_devorced">อย่า / Devorced</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_widowed" name="citizen_marital" class="custom-control-input" value="-1"{% if citizen.info.citizen_marital == '-1' %} checked{% endif %}>
													<label class="custom-control-label" for="citizen_widowed">หม้าย / Widowed</label>
												</div>
											</div>
										</div>
									</div>
									<hr class="mt-2 mb-4">
									<div class="form-row">
										<div class="col-lg-8 mb-3">
											<label for="citizen_sp_title" class="h5 mb-2 user-select-none">คู่สมรส / Spouse: </label>
											<div class="mt-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_sp_title_mr" name="citizen_sp_title" class="custom-control-input" value="1"{% if citizen.info.citizen_sp_title == '1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_sp_title_mr">นาย / Mr.</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_sp_title_mrs" name="citizen_sp_title" class="custom-control-input" value="2"{% if citizen.info.citizen_sp_title == '2' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_sp_title_mrs">นาง / Mrs.</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_sp_title_ms" name="citizen_sp_title" class="custom-control-input" value="3"{% if citizen.info.citizen_sp_title == '3' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_sp_title_ms">นางสาว / Ms.</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_sp_title_other" name="citizen_sp_title" class="custom-control-input" value="-1"{% if citizen.info.citizen_sp_title == '-1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_sp_title_other">อื่นๆ / Other</label>
												</div>
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="citizen_sp_name" class="user-select-none">ชื่อ / First name: </label>
											<input type="text" id="citizen_sp_name" name="citizen_sp_name" class="form-control" value="{{citizen.info.citizen_sp_name}}">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_sp_surname" class="user-select-none">นามสกุล / Last name: </label>
											<input type="text" id="citizen_sp_surname" name="citizen_sp_surname" class="form-control" value="{{citizen.info.citizen_sp_surname}}">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_sp_birthday" class="user-select-none">วันเดือนปีเกิด / Date of birth:</label>
											<input type="text" id="citizen_sp_birthday" name="citizen_sp_birthday" class="form-control datetimepicker left top" value="{{citizen.info.citizen_sp_birthday}}" autocomplete="off">
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_sp_occupation" class="user-select-none">อาชีพ / Occupation:</label>
											<input type="text" id="citizen_sp_occupation" name="citizen_sp_occupation" class="form-control" value="{{citizen.info.citizen_sp_occupation}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="citizen_sp_status" class="user-select-none">สถานะ / Status:</label>
											<div class="sp-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_sp_status_al" name="citizen_sp_status" class="custom-control-input" value="1"{% if citizen.info.citizen_sp_status == '1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_sp_status_al">มีชีวิตอยู่ / Alive</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_sp_status_pa" name="citizen_sp_status" class="custom-control-input" value="2"{% if citizen.info.citizen_sp_status == '2' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_sp_status_pa">ถึงแก่กรรม / Pass away</label>
												</div>
											</div>
										</div>
										<div class="col-lg mb-3">
											<label for="citizen_blood" class="user-select-none">หมู่โลหิต / Blood type: </label>
											<div class="mt-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_a_sp" name="citizen_blood_sp" class="custom-control-input" value="A"{% if citizen.info.citizen_blood_sp == 'A' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_a_sp">A</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_b_sp" name="citizen_blood_sp" class="custom-control-input" value="B"{% if citizen.info.citizen_blood_sp == 'B' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_b_sp">B</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_ab_sp" name="citizen_blood_sp" class="custom-control-input" value="AB"{% if citizen.info.citizen_blood_sp == 'AB' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_ab_sp">AB</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_o_sp" name="citizen_blood_sp" class="custom-control-input" value="O"{% if citizen.info.citizen_blood_sp == 'O' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_o_sp">O</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="citizen_blood_other_sp" name="citizen_blood_sp" class="custom-control-input" value="-1"{% if citizen.info.citizen_blood_sp == '-1' %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="citizen_blood_other_sp">อื่นๆ / Other</label>
												</div>
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="congenital_disease_sp" class="user-select-none">โรคประจำตัว / Congenital disease: </label>
											<input type="text" id="congenital_disease_sp" name="congenital_disease_sp" class="form-control" value="{{citizen.info.congenital_disease_sp}}">
										</div>
										<div class="col-lg mb-3">
											<label for="drug_allergy_sp" class="user-select-none">แพ้ยา / Drug allergy: </label>
											<input type="text" id="drug_allergy_sp" name="drug_allergy_sp" class="form-control" value="{{citizen.info.drug_allergy_sp}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="regular_hospital_sp" class="user-select-none">โรงพยาบาลที่รับการรักษาประจำ / Regular treatment hospital: </label>
											<input type="text" id="regular_hospital_sp" name="regular_hospital_sp" class="form-control" value="{{citizen.info.regular_hospital_sp}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="illness_history_sp" class="user-select-none">ประวัติรับการรักษา / Illness history: </label>
											<textarea id="illness_history_sp" name="illness_history_sp" class="form-control">{{citizen.info.illness_history_sp}}</textarea>
										</div>
									</div>
									{% if sub_functions == 'read' %}
										<div class="form-row">
											<div class="col-lg mb-3">
												<div class="form-group mb-0">
													<a class="btn btn-dark text-white" type="button" onclick="send_medical('sp')">ส่งข้อมูลทางการแพทย์</a>
												</div>
											</div>
										</div>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
					<div class="accordion" id="accordion_06">
						<div class="card">
							<div class="card-header p-0 bg-danger" id="heading_06">
								<h4 class="h4 mb-0">
									<button class="btn btn-link btn-block text-left text-decoration-none text-white" type="button" data-toggle="collapse" data-target="#collapse_06" aria-expanded="true" aria-controls="collapse_06">
										<i class="fas fa-briefcase"></i>
										<span>ข้อมูลการทำงาน / Work information</span>
										<span class="clearfix">
											<div class="float-right">
												<i class="fas fa-plus"></i>
											</div>
										</span>
									</button>
								</h4>
							</div>
							<div id="collapse_06" class="collapse" aria-labelledby="heading_06" data-parent="#accordion_06">
								<div class="card-body">
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="org_id" class="user-select-none">สถานที่ทำงาน / Workplaces: </label>
											<select id="org_id" name="org_id" class="custom-select d-block">
												<option readonly></option>
												{% for org_profile in org_profiles if org_profiles is defined and org_profiles is not empty %}
													<option value="{{org_profile.id}}"{% if citizen.info.org_id == org_profile.id %} selected{% endif %}>{{org_profile.name}}</option>
												{% endfor %}
											</select>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="citizen_work_org" class="user-select-none">หรือกรอกที่นี่หากสถานที่ทำงานไม่อยู่ในรายการ / Or fill here if workplaces are not listed: </label>
											<input type="text" id="citizen_work_org" name="citizen_work_org" class="form-control" value="{{citizen.info.citizen_work_org}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="citizen_work_pos" class="user-select-none">ตำแหน่ง / Position: </label>
											<input type="text" id="citizen_work_pos" name="citizen_work_pos" class="form-control" value="{{citizen.info.citizen_work_pos}}">
										</div>
									</div>
									<hr class="mt-2 mb-4">
									<div class="form-row">
										<div class="col-lg mb-3">
											<div id="map3" class="border rounded">
												<div class="m-2"><i class="fas fa-spinner fa-spin"></i> กำลังโหลด... / Loading...</div>
											</div>
											<ul class="mb-0">
												<li><small class="form-text text-muted user-select-none">ปักหมุดที่อยู่ที่ทำงานลงบนแผนที่ / Mark your workplace address on map.</small></li>
												<li><small class="form-text text-muted user-select-none">สามารถค้นหาสถานที่ได้ในช่องค้นหาสถานที่ / You can search location on "Location search".</small></li>
											</ul>
											<div class="form-group mb-0">
												<label class="mt-2">ค้นหาสถานที่ / Location search: </label>
												<div class="input-group">
													<input type="text" class="form-control" id="map3_search" placeholder="กรอกอย่างน้อย 3 ตัวอักษร / Enter at least 3 characters">
													<div class="input-group-append">
														<button id="map3_submit" class="btn btn-secondary" type="button" title="Search">
															<i class="fas fa-search"></i>
														</button>
													</div>
												</div>
												<input type="hidden" id="map3_area">
												<input type="hidden" id="map3_tag">
												<input type="hidden" id="map3_span">
												<input type="hidden" id="map3_limit" value="20">
												<div id="map3_result" class="mt-2 rounded border overflow-auto"></div>
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg-4 mb-3">
											<label for="citizen_work_no" class="user-select-none">บ้านเลขที่ / House no: </label>
											<input type="text" id="citizen_work_no" name="citizen_work_no" class="form-control" value="{{citizen.address[1].citizen_work_no}}">
										</div>
										<div class="col-lg-8 mb-3">
											<label for="citizen_work_addr" class="user-select-none">ที่อยู่ / Address: </label>
											<input type="text" id="citizen_work_addr" name="citizen_work_addr" class="form-control" value="{{citizen.address[1].citizen_work_addr}}">
										</div>
									</div>
									{% if sub_functions == 'read' %}
										<div class="form-row">
											<div class="col-lg">
												<a class="btn btn-dark text-white" type="button" onclick="send_location('citizen_work_lat','citizen_work_lon')">Send location</a>
											</div>
										</div>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
					<div class="d-none invisible">
						<input type="hidden" id="citizen_pmnt_lat" name="citizen_pmnt_lat" class="form-control" value="{{citizen.info.citizen_pmnt_lat}}">
						<input type="hidden" id="citizen_pmnt_lon" name="citizen_pmnt_lon" class="form-control" value="{{citizen.info.citizen_pmnt_lon}}">
						{#<input type="hidden" id="address" name="address" class="form-control">#}
						{#<input type="hidden" id="citizen_address" name="citizen_address" class="form-control" value="{{citizen.citizen_address}}">#}
						<input type="hidden" id="citizen_current_lat" name="citizen_current_lat" class="form-control" value="{{citizen.citizen_current_lat}}">
						<input type="hidden" id="citizen_current_lon" name="citizen_current_lon" class="form-control" value="{{citizen.citizen_current_lon}}">
						{#<input type="hidden" id="citizen_home_addr" name="citizen_home_addr" class="form-control" value="{{citizen.address[0].citizen_home_addr}}">#}
						<input type="hidden" id="citizen_home_lat" name="citizen_home_lat" class="form-control" value="{{citizen.address[0].citizen_home_lat}}">
						<input type="hidden" id="citizen_home_lon" name="citizen_home_lon" class="form-control" value="{{citizen.address[0].citizen_home_lon}}">
						{#<input type="hidden" id="citizen_home_no" name="citizen_home_no" class="form-control" value="{{citizen.address[0].citizen_home_no}}">#}
						{#<input type="hidden" id="citizen_telephone" name="citizen_telephone" class="form-control" value="{{citizen.citizen_telephone}}">#}
						{#<input type="hidden" id="citizen_telephone_office" name="citizen_telephone_office" class="form-control" value="{{citizen.citizen_telephone_office}}">#}
						{#<input type="hidden" id="citizen_work_addr" name="citizen_work_addr" class="form-control" value="{{citizen.address[1].citizen_work_addr}}">#}
						<input type="hidden" id="citizen_work_lat" name="citizen_work_lat" class="form-control" value="{{citizen.address[1].citizen_work_lat}}">
						<input type="hidden" id="citizen_work_lon" name="citizen_work_lon" class="form-control" value="{{citizen.address[1].citizen_work_lon}}">
						{#<input type="hidden" id="citizen_work_no" name="citizen_work_no" class="form-control" value="{{citizen.address[1].citizen_work_no}}">#}
						{#<input type="hidden" id="created_date" name="created_date" class="form-control" value="{{citizen.created_date}}">#}
						{#<input type="hidden" id="device_name" name="device_name" class="form-control" value="{{citizen.device_name}}">#}
						{#<input type="hidden" id="device_token" name="device_token" class="form-control" value="{{citizen.device_token}}">#}
						{#<input type="hidden" id="info" name="info" class="form-control">#}
						{#<input type="hidden" id="is_blacklist" name="is_blacklist" class="form-control" value="{{citizen.is_blacklist}}">#}
						{#<input type="hidden" id="is_vip" name="is_vip" class="form-control" value="{{citizen.is_vip}}">#}
						{#<input type="hidden" id="modified_date" name="modified_date" class="form-control" value="{{citizen.modified_date}}">#}
						{#{% if functions == 'create' %}
							<input type="hidden" id="user_create" name="user_create" class="form-control" value="{{citizen.user_create}}">
						{% endif %}#}
						{#<input type="hidden" id="user_modify" name="user_modify" class="form-control" value="{{citizen.user_modify}}">#}
						{#<input type="hidden" id="citizen_pmnt_addr" name="citizen_pmnt_addr" class="form-control" value="{{citizen.info.citizen_pmnt_addr}}">#}
						{#<input type="hidden" id="citizen_crt_addr" name="citizen_crt_addr" class="form-control" value="{{citizen.info.citizen_crt_addr}}">#}
						{#<input type="hidden" id="other" name="other" class="form-control" value="{{citizen.info.other}}">#}
						<input type="hidden" id="congenital_disease" name="congenital_disease" class="form-control" value="{{citizen.info.congenital_disease}}">
						<input type="hidden" id="other_body" name="other_body" class="form-control" value="{{citizen.info.other_body}}">
						{% if connid is defined and connid is not empty %}
							<input type="hidden" id="connid" name="connid" class="form-control" value="{{connid}}">
						{% endif %}
						{% if ext is defined and ext is not empty %}
							<input type="hidden" id="ext" name="ext" class="form-control" value="{{ext}}">
						{% endif %}
					</div>
				</div>
			</div>
		</div>
		{% include 'lbs/footer.html.twig' %}
		<div id="modal_confirm" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal_confirm_label" aria-hidden="true">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header bg-primary">
						{% if functions == 'create' %}
							<h5 id="modal_confirm_label" class="modal-title text-white">ยืนยันการสมัครใช้งาน / Register confirmation</h5>
						{% elseif functions == 'update' %}
							<h5 id="modal_confirm_label" class="modal-title text-white">ยืนยันการอัพเดทข้อมูล / Update confirmation</h5>
						{% endif %}
						<a type="button" class="close" data-dismiss="modal" aria-label="Close" title="ปิด">
							<span aria-hidden="true">&times;</span>
						</a>
					</div>
					<div class="modal-body d-block justify-content-start">
						<div class="clearfix">
							<div class="float-left">
								<button type="button" class="btn btn-secondary" data-dismiss="modal"><i class="fas fa-times-circle"></i> ยกเลิก / Cancel</button>
							</div>
							<div class="float-right">
								<button type="submit" class="btn btn-success"><i class="far fa-check-circle"></i> ยืนยัน / Confirm</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
	{% if functions == 'create' %}
		<div id="modal_term_and_policy" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal_term_and_policy_label" aria-hidden="true">
			<div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<div class="modal-header bg-danger">
						<h5 id="modal_term_and_policy_label" class="modal-title text-white user-select-none">ข้อกำหนดและนโยบาย / Term and policy</h5>
					</div>
					<div class="modal-body">
						{% include 'lbs/policy.html.twig' %}
					</div>
					<div class="modal-footer d-block justify-content-start">
						<div class="clearfix">
							<div class="float-left">
								<div class="custom-control custom-checkbox mt-2">
									<input type="checkbox" class="custom-control-input" id="chk_term_and_policy">
									<label class="custom-control-label" for="chk_term_and_policy">ฉันยอมรับข้อกำหนดและนโยบาย / I accept term and policy</label>
								</div>
							</div>
							<div class="float-right">
								<button type="button" id="btn_term_and_policy" class="btn btn-primary disabled" data-dismiss="modal" disabled><i class="far fa-check-circle"></i> ตกลง / Accept</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	{% endif %}
	{% include 'lbs/script.html.twig' %}
	<script type="text/javascript" src="{{base_url()}}assets/plugins/bootstrap-datetimepicker/js/moment.min.js"></script>
	<script type="text/javascript" src="{{base_url()}}assets/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
	<script type="text/javascript" src="{{base_url()}}assets/plugins/select2-4.0.13/dist/js/select2.full.min.js"></script>
	<script type="text/javascript" src="http://192.168.101.63/map2/?key={{_MAP_KEY}}"></script>
	<script type="text/javascript">
		var invalid=false;
		var map1;
		var wgs84_lat1='{{citizen.info.citizen_pmnt_lat}}';
		var wgs84_lon1='{{citizen.info.citizen_pmnt_lon}}';
		var wgs84_lat2='{{citizen.address[0].citizen_home_lat}}';
		var wgs84_lon2='{{citizen.address[0].citizen_home_lon}}';
		var wgs84_lat3='{{citizen.address[1].citizen_work_lat}}';
		var wgs84_lon3='{{citizen.address[1].citizen_work_lon}}';
		//Example starter JavaScript for disabling form submissions if there are invalid fields
		(function(){
			'use strict'
			window.addEventListener('load',function(){
				//Fetch all the forms we want to apply custom Bootstrap validation styles to
				var forms=document.getElementsByClassName('needs-validation')
				var p_no=document.getElementById('citizen_phone_number')
				var p_no_fb=document.getElementById('citizen_phone_number_feedback')
				var email=document.getElementById('citizen_email')
				var email_fb=document.getElementById('citizen_email_feedback')
				var pwd_o_fb=document.getElementById('citizen_password_old_feedback')
				var pwd_o=document.getElementById('citizen_password_old')
				var pwd_o_fb=document.getElementById('citizen_password_old_feedback')
				var pwd=document.getElementById('citizen_password')
				var pwd_fb=document.getElementById('citizen_password_feedback')
				var pwd_cf=document.getElementById('citizen_password_confirm')
				var pwd_cf_fb=document.getElementById('citizen_password_confirm_feedback')
				var pwd_m_fbs=document.getElementsByClassName('password-miss-match')
				//Loop over them and prevent submission
				Array.prototype.filter.call(forms,function(form){
					form.addEventListener('submit',function(event){
						if(form.checkValidity()===false||pwd.value!=pwd_cf.value){
							event.preventDefault()
							event.stopPropagation()
							if(p_no.value==''){
								p_no.classList.add('is-invalid')
								p_no.classList.remove('is-valid')
								p_no_fb.classList.add('d-block')
							}
							if(email.value==''){
								email.classList.add('is-invalid')
								email.classList.remove('is-valid')
								email_fb.classList.add('d-block')
							}
							if(pwd_o&&pwd_o.value==''){
								pwd_o.classList.add('is-invalid')
								pwd_o.classList.remove('is-valid')
								pwd_o_fb.classList.add('d-block')
							}
							if(pwd.value==''){
								pwd.classList.add('is-invalid')
								pwd.classList.remove('is-valid')
								pwd_fb.classList.add('d-block')
							}
							if(pwd_cf.value==''){
								pwd_cf.classList.add('is-invalid')
								pwd_cf.classList.remove('is-valid')
								pwd_cf_fb.classList.add('d-block')
							}
							if(pwd.value!=pwd_cf.value){
								pwd.classList.add('is-invalid')
								pwd.classList.remove('is-valid')
								pwd_cf.classList.add('is-invalid')
								pwd_cf.classList.remove('is-valid')
								Array.prototype.filter.call(pwd_m_fbs,function(pwd_m_fb){
									pwd_m_fb.classList.add('d-block')
								})
							}
							$('#modal_confirm').modal('hide')
							invalid=true
						}
						else{
							$('[type="submit"]').attr("disabled",true).addClass("disabled");
							$('[type="submit"]').find("svg").removeClass("fa-check-circle").addClass("fa-spin").addClass('fa-spinner');
							invalid=false
						}
						if(p_no.value!=''){
							p_no.classList.remove('is-invalid')
							p_no.classList.add('is-valid')
							p_no_fb.classList.remove('d-block')
							invalid=false
						}
						if(email.value!=''){
							email.classList.remove('is-invalid')
							email.classList.add('is-valid')
							email_fb.classList.remove('d-block')
							invalid=false
						}
						if(pwd_o&&pwd_o.value!=''){
							pwd_o.classList.remove('is-invalid')
							pwd_o.classList.add('is-valid')
							pwd_o_fb.classList.remove('d-block')
							invalid=false
						}
						if(pwd.value!=''){
							pwd.classList.remove('is-invalid')
							pwd.classList.add('is-valid')
							pwd_fb.classList.remove('d-block')
						}
						if(pwd_cf.value!=''){
							pwd_cf.classList.remove('is-invalid')
							pwd_cf.classList.add('is-valid')
							pwd_cf_fb.classList.remove('d-block')
						}
						if(pwd.value!=''&&pwd_cf.value!=''&&pwd.value==pwd_cf.value){
							pwd.classList.remove('is-invalid')
							pwd.classList.add('is-valid')
							pwd_cf.classList.remove('is-invalid')
							pwd_cf.classList.add('is-valid')
							Array.prototype.filter.call(pwd_m_fbs,function(pwd_m_fb){
								pwd_m_fb.classList.remove('d-block')
							})
							invalid=false
						}
						//form.classList.add('was-validated')
					},false)
				})
			},false)
		}())
		function empty_url(id){
			if(id!=''){
				$("#" + id).val(null);
				$("#" + id + "_preview").removeAttr('src');
			}
		}
		function filling_msg_txtbox(lat,lon,opt){
			map1.Ui.Mouse.enableClick(false);
			if(lat!=''&&lon!=''){
				$.ajax({
					url:"{{addr_url}}"+lat+'/'+lon,
					method:"GET",
					headers:{Authorization:"bXlabkZsMWZXVFhDK2NsMWgvMm9GZz09"},
					contentType:"application/json;charset=utf-8",
					dataType:"json",
					timeout:10000,
				}).done(function(msg){
					if(opt==1){
						if(msg.country)document.getElementById("citizen_pmnt_country").value=msg.country;
						if(msg.postcode)document.getElementById("citizen_pmnt_postcode").value=msg.postcode;
						if(msg.province)document.getElementById("citizen_pmnt_province").value=msg.province;
						if(msg.district)document.getElementById("citizen_pmnt_district").value=msg.district;
						if(msg.subdistrict)document.getElementById("citizen_pmnt_subdistrict").value=msg.subdistrict;
						if(msg.road)document.getElementById("citizen_pmnt_address").value=msg.road;
					}
					if(opt==2){
						if(msg.country)document.getElementById("citizen_home_country").value=msg.country;
						if(msg.postcode)document.getElementById("citizen_home_postcode").value=msg.postcode;
						if(msg.province)document.getElementById("citizen_home_province").value=msg.province;
						if(msg.district)document.getElementById("citizen_home_district").value=msg.district;
						if(msg.subdistrict)document.getElementById("citizen_home_subdistrict").value=msg.subdistrict;
						if(msg.road)document.getElementById("citizen_home_address").value=msg.road;
					}
					if(opt==3){
						if(msg){
							document.getElementById("citizen_work_addr").value='';
							if(msg.road)document.getElementById("citizen_work_addr").value+=msg.road;
							if(msg.subdistrict)document.getElementById("citizen_work_addr").value+=', '+msg.subdistrict;
							if(msg.district)document.getElementById("citizen_work_addr").value+=', '+msg.district;
							if(msg.province)document.getElementById("citizen_work_addr").value+=', '+msg.province;
							if(msg.postcode)document.getElementById("citizen_work_addr").value+=' '+msg.postcode;
							if(msg.country)document.getElementById("citizen_work_addr").value+=', '+msg.country;
						}
					}
				}).fail(function(jqXHR,textStatus){}).always(function(){
					map1.Ui.Mouse.enableClick(true);
				});
			}
		}
		function filling_msg_txtbox1(){
			document.getElementsByName('citizen_pmnt_lat')[0].value=wgs84_lat1;
			document.getElementsByName('citizen_pmnt_lon')[0].value=wgs84_lon1;
			filling_msg_txtbox(wgs84_lat1,wgs84_lon1,1);
		}
		function filling_msg_txtbox2(){
			document.getElementsByName('citizen_home_lat')[0].value=wgs84_lat2;
			document.getElementsByName('citizen_home_lon')[0].value=wgs84_lon2;
			filling_msg_txtbox(wgs84_lat2,wgs84_lon2,2);
		}
		function filling_msg_txtbox3(){
			document.getElementsByName('citizen_work_lat')[0].value=wgs84_lat3;
			document.getElementsByName('citizen_work_lon')[0].value=wgs84_lon3;
			filling_msg_txtbox(wgs84_lat3,wgs84_lon3,3);
		}
		function get_form_data($form){
			var unindexed_array=$form.serializeArray();
			var indexed_array={};
			$.map(unindexed_array,function(n,i){
				if(n['value']!=''&&n['value']!=null)
					indexed_array[n['name']]=n['value'];
			});
			return indexed_array;
		}
		function init(){
			//permanent address
			map1=new longdo.Map({layer:[longdo.Layers.GRAY_EN],placeholder:document.getElementById('map1')});
			map1.Ui.Crosshair.visible(false);
			map1.Ui.Geolocation.visible(false);
			map1.Ui.LayerSelector.visible(false);
			map1.Ui.Toolbar.visible(false);
			map1.Event.bind('click',function(){
				var location=map1.location(longdo.LocationMode.Pointer);
				if(location){
					wgs84_lat1=new Number(location.lat).toFixed(6);
					wgs84_lon1=new Number(location.lon).toFixed(6);
					map1.Overlays.clear().add(new longdo.Marker({lon:location.lon,lat:location.lat}));
					map1.location({lon:wgs84_lon1,lat:wgs84_lat1},true);
					filling_msg_txtbox1();
				}
			});
			map1.Event.bind('overlayClick',function(){
				var location=map1.location(longdo.LocationMode.Pointer);
				if(location){
					wgs84_lat1=new Number(location.lat).toFixed(6);
					wgs84_lon1=new Number(location.lon).toFixed(6);
					map1.Overlays.clear().add(new longdo.Marker({lon:location.lon,lat:location.lat}));
					map1.location({lon:wgs84_lon1,lat:wgs84_lat1},true);
					filling_msg_txtbox1();
				}
			});
			if(wgs84_lat1==''||wgs84_lon1==''){
				map1.Overlays.clear();
				map1.location(longdo.LocationMode.Geolocation).zoom(15,true);
			}
			else{
				map1.Overlays.clear().add(new longdo.Marker({lon:wgs84_lon1,lat:wgs84_lat1}));
				map1.location({lon:wgs84_lon1,lat:wgs84_lat1},true);
			}
			map1.Search.placeholder(document.getElementById('map1_result')).language('en');
			//home address and current location
			map2=new longdo.Map({layer:[longdo.Layers.GRAY_EN],placeholder:document.getElementById('map2')});
			map2.Ui.Crosshair.visible(false);
			map2.Ui.Geolocation.visible(false);
			map2.Ui.LayerSelector.visible(false);
			map2.Ui.Toolbar.visible(false);
			map2.Event.bind('click',function(){
				var location=map2.location(longdo.LocationMode.Pointer);
				if(location){
					wgs84_lat2=new Number(location.lat).toFixed(6);
					wgs84_lon2=new Number(location.lon).toFixed(6);
					map2.Overlays.clear().add(new longdo.Marker({lon:location.lon,lat:location.lat}));
					map2.location({lon:wgs84_lon2,lat:wgs84_lat2},true);
					filling_msg_txtbox2();
				}
			});
			map2.Event.bind('overlayClick',function(){
				var location=map2.location(longdo.LocationMode.Pointer);
				if(location){
					wgs84_lat2=new Number(location.lat).toFixed(6);
					wgs84_lon2=new Number(location.lon).toFixed(6);
					map2.Overlays.clear().add(new longdo.Marker({lon:location.lon,lat:location.lat}));
					map2.location({lon:wgs84_lon2,lat:wgs84_lat2},true);
					filling_msg_txtbox2();
				}
			});
			if(wgs84_lat2==''||wgs84_lon2==''){
				map2.Overlays.clear();
				map2.location(longdo.LocationMode.Geolocation).zoom(15,true);
			}
			else{
				map2.Overlays.clear().add(new longdo.Marker({lon:wgs84_lon2,lat:wgs84_lat2}));
				map2.location({lon:wgs84_lon2,lat:wgs84_lat2},true);
			}
			document.getElementsByName('citizen_current_lat')[0].value=map2.location().lat;
			document.getElementsByName('citizen_current_lon')[0].value=map2.location().lon;
			map2.Search.placeholder(document.getElementById('map2_result')).language('en');
			//workplaces address
			map3=new longdo.Map({layer:[longdo.Layers.GRAY_EN],placeholder:document.getElementById('map3')});
			map3.Ui.Crosshair.visible(false);
			map3.Ui.Geolocation.visible(false);
			map3.Ui.LayerSelector.visible(false);
			map3.Ui.Toolbar.visible(false);
			map3.Event.bind('click',function(){
				var location=map3.location(longdo.LocationMode.Pointer);
				if(location){
					wgs84_lat3=new Number(location.lat).toFixed(6);
					wgs84_lon3=new Number(location.lon).toFixed(6);
					map3.Overlays.clear().add(new longdo.Marker({lon:location.lon,lat:location.lat}));
					map3.location({lon:wgs84_lon3,lat:wgs84_lat3},true);
					filling_msg_txtbox3();
				}
			});
			map3.Event.bind('overlayClick',function(){
				var location=map3.location(longdo.LocationMode.Pointer);
				if(location){
					wgs84_lat3=new Number(location.lat).toFixed(6);
					wgs84_lon3=new Number(location.lon).toFixed(6);
					map3.Overlays.clear().add(new longdo.Marker({lon:location.lon,lat:location.lat}));
					map3.location({lon:wgs84_lon3,lat:wgs84_lat3},true);
					filling_msg_txtbox3();
				}
			});
			if(wgs84_lat3==''||wgs84_lon3==''){
				map3.Overlays.clear();
				map3.location(longdo.LocationMode.Geolocation).zoom(15,true);
			}
			else{
				map3.Overlays.clear().add(new longdo.Marker({lon:wgs84_lon3,lat:wgs84_lat3}));
				map3.location({lon:wgs84_lon3,lat:wgs84_lat3},true);
			}
			map3.Search.placeholder(document.getElementById('map3_result')).language('en');
		}
		function policy_toggle(){
			$("#modal_term_and_policy").modal({
				backdrop:"static",
				focus:true,
				keyboard:false,
				show:true
			});
		}
		function read_url(input,id){
			if(input.files&&input.files[0]&&id!=''){
				var reader=new FileReader();
				reader.onload=function(event){
					$('#' + id + '_preview').attr('src',event.target.result);
				}
				reader.readAsDataURL(input.files[0]);
			}
		}
		function searching_place1(){
			map1.Search.search(map1_search.value,{
				area:document.getElementById('map1_area').value,
				tag:document.getElementById('map1_tag').value,
				span:document.getElementById('map1_span').value,
				limit:document.getElementById('map1_limit').value
			});
		}
		function searching_place2(){
			map2.Search.search(map2_search.value,{
				area:document.getElementById('map2_area').value,
				tag:document.getElementById('map2_tag').value,
				span:document.getElementById('map2_span').value,
				limit:document.getElementById('map2_limit').value
			});
		}
		function searching_place3(){
			map3.Search.search(map3_search.value,{
				area:document.getElementById('map3_area').value,
				tag:document.getElementById('map3_tag').value,
				span:document.getElementById('map3_span').value,
				limit:document.getElementById('map3_limit').value
			});
		}
		function send_location(_lat,_lon){
			var _ani='{{ani}}';
			var _ext='{{ext}}';
			var _connid='{{connid}}';
			var _callerName='{{callerName}}';
			var _latitude='{{latitude}}';
			var _longitude='{{longitude}}';
			var _altitude='{{altitude}}';
			if(_lat!=''&&_lon!=''){
				var id_lat=$('#'+_lat).val();
				var id_lon=$('#'+_lon).val();
				$.ajax({
					url:"{{base_url()}}lbs/sender",
					method:"POST",
					data:{
						ani:_ani,
						ext:_ext,
						connid:_connid,
						callerName:_callerName,
						latitude:_latitude!=''?_latitude:id_lat,
						longitude:_longitude!=''?_longitude:id_lon,
						altitude:_altitude,
						url:"http://127.0.0.1:8005/pf191",
					},
					timeout:10000,
				}).done(function(msg){
					console.log(msg);
				}).fail(function(jqXHR,textStatus){}).always(function(){});
			}
		}
		function send_medical(_relation){
			var med_msg='';
			var med_name=document.getElementsByName('citizen_'+_relation+'_name');
			var med_surname=document.getElementsByName('citizen_'+_relation+'_surname');
			var med_birthday=document.getElementsByName('citizen_'+_relation+'_birthday');
			var med_blood=document.getElementsByName('citizen_blood_'+_relation);
			var med_disease=document.getElementsByName('congenital_disease_'+_relation);
			var med_allergy=document.getElementsByName('drug_allergy_'+_relation);
			var med_hospital=document.getElementsByName('regular_hospital_'+_relation);
			var med_history=document.getElementsByName('illness_history_'+_relation);
			if(med_name[0].value!='')med_msg+=(med_name[0].value).trim();
			if(med_name[0].value!=''&&med_surname[0].value!='')med_msg+=' '+(med_surname[0].value).trim();
			if(med_birthday[0].value!=''){
				var months=['มกราคม','กุมภาพันธ์','มีนาคม','เมษายน','พฤษภาคม','มิถุนายน','กรกฎาคม','สิงหาคม','กันยายน','ตุลาคม','พฤศจิกายน','ธันวาคม'];
				var bdate=((med_birthday[0].value).trim()).split('/');
				var bday=bdate[0];
				var bmonth=months[parseInt(bdate[1])-1];
				var byear=parseInt(bdate[2])+543;
				med_msg+=(med_msg!=''?'\r\n':'')+'วันเดือนปีเกิด '+bday+' '+bmonth+' '+byear;
			}
			if(med_blood[0].checked)med_msg+=(med_msg!=''?'\r\n':'')+'หมู่โลหิต A';
			else if(med_blood[1].checked)med_msg+=(med_msg!=''?'\r\n':'')+'หมู่โลหิต B';
			else if(med_blood[2].checked)med_msg+=(med_msg!=''?'\r\n':'')+'หมู่โลหิต AB';
			else if(med_blood[3].checked)med_msg+=(med_msg!=''?'\r\n':'')+'หมู่โลหิต O';
			if(med_disease[0].value!='')med_msg+=(med_msg!=''?'\r\n':'')+'โรคประจำตัว '+(med_disease[0].value).trim();
			if(med_allergy[0].value!='')med_msg+=(med_msg!=''?'\r\n':'')+'แพ้ยา '+(med_allergy[0].value).trim();
			if(med_hospital[0].value!='')med_msg+=(med_msg!=''?'\r\n':'')+'โรงพยาบาลที่รับการรักษาประจำ '+(med_hospital[0].value).trim();
			if(med_history[0].value!='')med_msg+=(med_msg!=''?'\r\n':'')+'ประวัติรับการรักษา '+(med_history[0].value).trim();
		}
		map1_search.onkeypress=function(e){
			if(map1_search.value.length>=3&&e.keyCode==13)
				searching_place1();
		}
		map2_search.onkeypress=function(e){
			if(map2_search.value.length>=3&&e.keyCode==13)
				searching_place2();
		}
		map3_search.onkeypress=function(e){
			if(map3_search.value.length>=3&&e.keyCode==13)
				searching_place3();
		}
		map1_submit.onclick=function(){
			if(map1_search.value.length>=3)
				searching_place1();
		}
		map2_submit.onclick=function(){
			if(map2_search.value.length>=3)
				searching_place2();
		}
		map3_submit.onclick=function(){
			if(map3_search.value.length>=3)
				searching_place3();
		}
		$(function(){
			$('[data-toggle="collapse"]').on("click",function(){
				$(this).find("svg").eq(1).toggleClass("fa-minus fa-plus");
			});
			$("#chk_term_and_policy").on("change",function(){
				if($(this).prop("checked")==true){
					$("#btn_term_and_policy").attr("disabled",false).removeClass("disabled");
				}
				else if($(this).prop("checked")==false){
					$("#btn_term_and_policy").attr("disabled",true).addClass("disabled");
				}
			});
			$("#citizen_photo").change(function(){
				read_url(this,'citizen_photo');
			});
			$("#citizen_photo_bldg").change(function(){
				read_url(this,'citizen_photo_bldg');
			});
			$(".datetimepicker.left.bottom").datetimepicker({
				format:"DD/MM/YYYY",
				useCurrent:false,
				widgetPositioning:{
					horizontal:"left",
					vertical:"bottom",
				},
			});
			$(".datetimepicker.left.top").datetimepicker({
				format:"DD/MM/YYYY",
				useCurrent:false,
				widgetPositioning:{
					horizontal:"left",
					vertical:"top",
				},
			});
			$(".datetimepicker").on('keydown keypress keyup',function(event){
				event.preventDefault();
			});
			$("#collapse_03,#collapse_06").on("shown.bs.collapse",function(event){
				init();
			});
			$("#org_id").select2({
				allowClear:true,
				placeholder:"เลือกสถานที่ทำงาน / Select workplaces",
				theme:"bootstrap4"
			});
		});
	</script>
</body>
</html>