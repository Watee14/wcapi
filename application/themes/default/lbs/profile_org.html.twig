<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>{{title}}</title>
	{% include 'lbs/style.html.twig' %}
	<link rel="stylesheet" type="text/css" href="{{base_url()}}assets/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker-4.17.47.min.css">
	<link rel="stylesheet" type="text/css" href="{{base_url()}}assets/plugins/select2-4.0.13/dist/css/select2.min.css">
	<link rel="stylesheet" type="text/css" href="{{base_url()}}assets/plugins/select2-bootstrap4-theme/dist/select2-bootstrap4.min.css">
	<link rel="stylesheet" type="text/css" href="{{base_url()}}assets/css/prompt-style-font.css">
	<style type="text/css">
		.bd-placeholder-img{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
		input[type="file"],.datetimepicker{cursor:pointer}
		@media (min-width:768px){.bd-placeholder-img-lg{font-size:3.5rem}}
		.lh-condensed{line-height:1.25}
		#map{height:300px}
		#map_result{height:100px}
		.select2-container--bootstrap4 .select2-selection__clear{background-color:transparent;color:#777777}
		.select2-container--bootstrap4 .select2-selection__clear:hover{background-color:transparent;color:#333333}
	</style>
</head>
<body class="bg-light mt-5 mb-5"{% if functions == 'create' %} onload="policy_toggle()"{% endif %}>
	{% include 'lbs/navbar.html.twig' %}
	<form class="needs-validation" method="POST" novalidate enctype="multipart/form-data">
		<div class="container pt-5 pb-5">
			<div class="row">
				<div class="col">
					<div class="alert alert-{{status is defined and status == 1 ? 'success' : 'danger'}} alert-dismissible fade show {{status is defined ? 'd-block' : 'd-none'}} mt-3 mb-3" role="alert">
						<span class="alert-message">{{message}}</span>
						<button type="button" class="close" data-dismiss="alert" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="mb-3">
						{% if functions == 'create' %}
							<label class="user-select-none">คำแนะนำในการสมัครใช้งาน / Introduce for register.</label>
						{% endif %}
						<ul class="mb-0">
							<li class="user-select-none">กรุณากรอกข้อมูลตามความเป็นจริง / Please give us the truth information.</li>
							<li class="user-select-none">ในช่องที่มีเครื่องหมาย <span class="text-danger">*</span> เป็นช่องที่บังคับในการกรอกข้อมูล / Sign <span class="text-danger">*</span> required fields.</li>
						</ul>
					</div>
					<div class="accordion" id="accordion_01">
						<div class="card">
							<div class="card-header p-0 bg-danger" id="heading_01">
								<h4 class="h4 mb-0">
									<button class="btn btn-link btn-block text-left text-decoration-none text-white" type="button" data-toggle="collapse" data-target="#collapse_01" aria-expanded="true" aria-controls="collapse_01">
										<i class="fas fa-sign-in-alt"></i>
										<span>ข้อมูลสำหรับลงชื่อเข้าใช้ / Sign in information</span>
										<span class="clearfix">
											<div class="float-right">
												<i class="fas fa-minus"></i>
											</div>
										</span>
									</button>
								</h4>
							</div>
							<div id="collapse_01" class="collapse show" aria-labelledby="heading_01" data-parent="#accordion_01">
								<div class="card-body">
									<div class="form-row">
										{% if functions == 'update' %}
											<div class="col-lg mb-3">
												<label for="org_id" class="user-select-none">รหัสองค์กร / Organization ID:</label>
												<div class="input-group">
													<div class="input-group-prepend">
														<div class="input-group-text">
															<i class="fas fa-id-badge"></i>
														</div>
													</div>
													<input type="text" id="org_id" class="form-control" value="{{org.org_id}}" disabled>
												</div>
											</div>
										{% endif %}
										<div class="col-lg mb-3">
											<label for="phone_no" class="user-select-none">หมายเลขโทรศัพท์ / Phone number: <small class="text-danger">*</small></label>
											<div class="input-group">
												<div class="input-group-prepend">
													<div class="input-group-text">
														<i class="fas fa-phone"></i>
													</div>
												</div>
												<input type="text" id="phone_no"{% if functions == 'create' %} name="phone_no"{% endif %} class="form-control" value="{{org.phone_no}}" maxlength="10"{% if functions == 'create' %} placeholder="ตัวอย่าง / Example: 0912345678" required{% else %} disabled{% endif %}>
											</div>
											<div id="phone_no_fbk" class="invalid-feedback user-select-none">กรุณากรอกหมายเลขโทรศัพท์ / Please fill phone number.</div>
										</div>
										<div class="col-lg mb-3">
											<label for="email" class="user-select-none">อีเมล / Email: <small class="text-danger">*</small></label>
											<div class="input-group">
												<div class="input-group-prepend">
													<div class="input-group-text">
														<i class="fas fa-at"></i>
													</div>
												</div>
												<input type="email" id="email" name="email" class="form-control" placeholder="ตัวอย่าง / Example: you@email.com" value="{{org.email}}" maxlength="50" required>
											</div>
											<div id="email_fbk" class="invalid-feedback user-select-none">กรุณากรอกอีเมล / Please fill email.</div>
										</div>
									</div>
									{% if functions == 'create' %}
										<div class="form-row">
											<div class="col-lg mb-3">
												<label for="pwd" class="user-select-none">รหัสผ่าน / Password: <small class="text-danger">*</small></label>
												<div class="input-group">
													<div class="input-group-prepend">
														<div class="input-group-text">
															<i class="fas fa-key"></i>
														</div>
													</div>
													<input type="password" id="pwd" name="pwd" class="form-control" placeholder="ตัวอย่าง / Example: 0000" maxlength="4" required>
												</div>
												<div id="pwd_fbk" class="invalid-feedback user-select-none">กรุณากรอกรหัสผ่าน / Please fill password.</div>
												<div class="invalid-feedback user-select-none pwd-miss-match">กรุณากรอกรหัสผ่านให้ตรงกัน / Please fill password match with confirm.</div>
											</div>
											<div class="col-lg mb-3">
												<label for="pwd_cfm" class="user-select-none">ยืนยันรหัสผ่าน / Confirm password: <small class="text-danger">*</small></label>
												<div class="input-group">
													<div class="input-group-prepend">
														<div class="input-group-text">
															<i class="fas fa-key"></i>
														</div>
													</div>
													<input type="password" id="pwd_cfm" class="form-control" maxlength="4" required>
												</div>
												<div id="pwd_cfm_fbk" class="invalid-feedback user-select-none">กรุณายืนยันรหัสผ่าน / Please confirm password.</div>
												<div class="invalid-feedback user-select-none pwd-miss-match">กรุณากรอกรหัสผ่านให้ตรงกัน / Please fill password match with confirm.</div>
											</div>
										</div>
									{% elseif functions == 'update' %}
										<div class="form-row">
											<div class="col-lg mb-3">
												<label for="pwd_old" class="user-select-none">รหัสผ่านปัจจุบัน / Current password: </label>
												<div class="input-group">
													<div class="input-group-prepend">
														<div class="input-group-text">
															<i class="fas fa-key"></i>
														</div>
													</div>
													<input type="password" id="pwd_old" name="pwd_old" class="form-control" maxlength="4">
												</div>
												<div id="pwd_old_fbk" class="invalid-feedback user-select-none">กรุณากรอกรหัสผ่านปัจจุบัน / Please fill current password.</div>
											</div>
											<div class="col-lg mb-3">
												<label for="pwd" class="user-select-none">รหัสผ่านใหม่ / New password: </label>
												<div class="input-group">
													<div class="input-group-prepend">
														<div class="input-group-text">
															<i class="fas fa-key"></i>
														</div>
													</div>
													<input type="password" id="pwd" name="pwd" class="form-control" placeholder="ตัวอย่าง / Example: 0000" maxlength="4">
												</div>
												<div id="pwd_fbk" class="invalid-feedback user-select-none">กรุณากรอกรหัสผ่านใหม่ / Please fill new password.</div>
												<div class="invalid-feedback user-select-none pwd-miss-match">กรุณากรอกรหัสผ่านให้ตรงกัน / Please fill password match with confirm.</div>
											</div>
											<div class="col-lg mb-3">
												<label for="pwd_cfm" class="user-select-none">ยืนยันรหัสผ่านใหม่ / Confirm new password: </label>
												<div class="input-group">
													<div class="input-group-prepend">
														<div class="input-group-text">
															<i class="fas fa-key"></i>
														</div>
													</div>
													<input type="password" id="pwd_cfm" class="form-control" maxlength="4">
												</div>
												<div id="pwd_cfm_fbk" class="invalid-feedback user-select-none">กรุณายืนยันรหัสผ่าน / Please confirm password.</div>
												<div class="invalid-feedback user-select-none pwd-miss-match">กรุณากรอกรหัสผ่านให้ตรงกัน / Please fill password match with confirm.</div>
											</div>
										</div>
										<div class="form-row">
											<div class="col-lg">
												<small class="form-text text-muted user-select-none">หากไม่ต้องการเปลี่ยนรหัสผ่านให้เว้นข้อมูลส่วนนี้ไว้ / Leave this blank, if you don't want to change password.</small>
											</div>
										</div>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
					<div id="accordion_02" class="accordion">
						<div class="card">
							<div id="heading_02" class="card-header p-0 bg-danger">
								<h4 class="h4 mb-0">
									<button class="btn btn-link btn-block text-left text-decoration-none text-white" type="button" data-toggle="collapse" data-target="#collapse_02" aria-expanded="true" aria-controls="collapse_02">
										<i class="fas fa-info-circle"></i>
										<span>ข้อมูลองค์กร / Organization information</span>
										<span class="clearfix">
											<div class="float-right">
												<i class="fas fa-plus"></i>
											</div>
										</span>
									</button>
								</h4>
							</div>
							<div id="collapse_02" class="collapse" aria-labelledby="heading_02" data-parent="#accordion_02">
								<div class="card-body">
									<div class="form-row">
										<div class="col-lg mb-3">
											<div class="mt-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="org_type_go" name="org_type" class="custom-control-input" value="1"{% if org.org_type == 1 %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="org_type_go">ภาครัฐ / Goverment</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="org_type_co" name="org_type" class="custom-control-input" value="2"{% if org.org_type == 2 %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="org_type_co">ภาคเอกชน / Corporation</label>
												</div>
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="org_name" class="user-select-none">ชื่อ / Name: </label>
											<input type="text" id="org_name" name="org_name" class="form-control" value="{{org.org_name}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label class="user-select-none">โลโก้ / Logo: </label>
											<div class="input-group">
												<div class="custom-file">
													<input type="file" id="org_logo" name="org_logo" class="custom-file-input" accept="image/*">
													<label class="custom-file-label" for="org_logo">เลือกไฟล์ / Choose file</label>
												</div>
												<div class="input-group-append">
													<button class="btn btn-secondary" type="button" onclick="empty_url('org_logo')"><i class="far fa-times-circle"></i></button>
												</div>
											</div>
											<div class="mt-3 mb-3">
												<img id="org_logo_preview" class="photo-preview w-100 mx-auto d-block"{% if org.org_logo != '' %} src="{{org.org_logo}}"{% endif %}>
											</div>
											<ul class="mb-0">
												<li><small class="form-text text-muted user-select-none">ควรตั้งชื่อไฟล์เป็นภาษาอังกฤษ / Please use file name in English.</small></li>
												<li><small class="form-text text-muted user-select-none">ท่านสามารถแนบเอกสาร ที่มีนามสกุลไฟล์ในลักษณะดังต่อไปนี้ .jpg., .png โดยขนาดไฟล์ไม่ควรเกิน 1,024 kb. / You can attachment .jpg, .png and size file should less than 1,024 kb.</small></li>
												<li><small class="form-text text-muted user-select-none">หากต้องการจะลบไฟล์แนบ ให้คลิกที่ไอคอน <i class="far fa-times-circle"></i> / If you want to delete file, you can click icon <i class="far fa-times-circle"></i></small></li>
											</ul>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="org_branch" class="user-select-none">สาขา / Branch: </label>
											<input type="text" id="org_branch" name="org_branch" class="form-control" value="{{org.org_branch}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="bsn_type" class="user-select-none">ประเภทธุรกิจ / Business type:</label>
											<select id="bsn_type" name="bsn_type" class="custom-select d-block">
												<option readonly></option>
												<option value="1"{% if org.bsn_type == 1 %} selected{% endif %}>ไอที / Information technology</option>
												<option value="2"{% if org.bsn_type == 2 %} selected{% endif %}>วิศวกรรม / Engineering</option>
												<option value="3"{% if org.bsn_type == 3 %} selected{% endif %}>บัญชี / Accounting</option>
												<option value="4"{% if org.bsn_type == 4 %} selected{% endif %}>โฆษณา, การตลาด, ประชาสัมพันธ์ / Marketing, Public relations</option>
												<option value="5"{% if org.bsn_type == 5 %} selected{% endif %}>ทรัพยากรบุคคล / Admin, HR</option>
												<option value="6"{% if org.bsn_type == 6 %} selected{% endif %}>การผลิต / Manufacturing</option>
												<option value="7"{% if org.bsn_type == 7 %} selected{% endif %}>บริการทางธุรกิจ / Professional services</option>
												<option value="8"{% if org.bsn_type == 8 %} selected{% endif %}>วิจัย, การสำรวจ / Sciences, Lab</option>
												<option value="9"{% if org.bsn_type == 9 %} selected{% endif %}>สื่อ, สิ่งพิมพ์, การพิมพ์ / Media, Advertising</option>
												<option value="999"{% if org.bsn_type == 999 %} selected{% endif %}>อื่นๆ / Other</option>
											</select>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="estbm_year" class="user-select-none">ปีที่ก่อตั้ง / Establishment year:</label>
											<select id="estbm_year" name="estbm_year" class="custom-select d-block">
												<option readonly></option>
												{% for i in 1300..2020 %}
													<option value="{{i}}"{% if org.estbm_year == i %} selected{% endif %}>{{i}}</option>
												{% endfor %}
											</select>
										</div>
										<div class="col-lg mb-3">
											<label for="epy_no" class="user-select-none">จำนวนพนักงาน / Number of employees: </label>
											<input type="text" id="epy_no" name="epy_no" class="form-control" value="{{org.epy_no}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="org_size" class="user-select-none">ขนาดองค์กร / Organization size:</label>
											<div class="mt-2">
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="org_size_sm" name="org_size" class="custom-control-input" value="1"{% if org.org_size == 1 %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="org_size_sm">เล็ก / Small</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="org_size_md" name="org_size" class="custom-control-input" value="2"{% if org.org_size == 2 %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="org_size_md">กลาง / Medium</label>
												</div>
												<div class="custom-control custom-radio custom-control-inline">
													<input type="radio" id="org_size_lg" name="org_size" class="custom-control-input" value="3"{% if org.org_size == 3 %} checked{% endif %}>
													<label class="custom-control-label user-select-none" for="org_size_lg">ใหญ่ / Large</label>
												</div>
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="bsn_desc" class="user-select-none">ลักษณะธุรกิจ / Business description: </label>
											<textarea id="bsn_desc" name="bsn_desc" class="form-control">{{org.bsn_desc}}</textarea>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div id="accordion_03" class="accordion">
						<div class="card">
							<div id="heading_03" class="card-header p-0 bg-danger">
								<h4 class="h4 mb-0">
									<button class="btn btn-link btn-block text-left text-decoration-none text-white" type="button" data-toggle="collapse" data-target="#collapse_03" aria-expanded="true" aria-controls="collapse_03">
										<i class="fas fa-map-marked-alt"></i>
										<span>ข้อมูลที่อยู่ / Address information</span>
										<span class="clearfix">
											<div class="float-right">
												<i class="fas fa-plus"></i>
											</div>
										</span>
									</button>
								</h4>
							</div>
							<div id="collapse_03" class="collapse" aria-labelledby="heading_03" data-parent="#accordion_03">
								<div class="card-body">
									<div class="form-row">
										<div class="col-lg mb-3">
											<div id="map" class="border rounded">
												<div class="m-2"><i class="fas fa-spinner fa-spin"></i> กำลังโหลด... / Loading...</div>
											</div>
											<ul class="mb-0">
												<li><small class="form-text text-muted user-select-none">ปักหมุดที่อยู่ลงบนแผนที่ / Mark address on map.</small></li>
												<li><small class="form-text text-muted user-select-none">สามารถค้นหาสถานที่ได้ในช่องค้นหาสถานที่ / You can search location on "Location search".</small></li>
											</ul>
											<div class="form-group mb-0">
												<label class="mt-2">ค้นหาสถานที่ / Location search: </label>
												<div class="input-group">
													<input type="text" class="form-control" id="map_search" placeholder="กรอกอย่างน้อย 3 ตัวอักษร / Enter at least 3 characters">
													<div class="input-group-append">
														<button id="map_submit" class="btn btn-secondary" type="button" title="Search">
															<i class="fas fa-search"></i>
														</button>
													</div>
												</div>
												<input type="hidden" id="map_area">
												<input type="hidden" id="map_tag">
												<input type="hidden" id="map_span">
												<input type="hidden" id="map_limit" value="20">
												<div id="map_result" class="mt-2 rounded border overflow-auto"></div>
											</div>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="bldg" class="user-select-none">อาคาร / Building: </label>
											<input type="text" id="bldg" name="bldg" class="form-control" value="{{org.org_addr.bldg}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="room_no" class="user-select-none">ห้องเลขที่ / Room no.: </label>
											<input type="text" id="room_no" name="room_no" class="form-control" value="{{org.org_addr.room_no}}">
										</div>
										<div class="col-lg mb-3">
											<label for="floor" class="user-select-none">ชั้น / Floor: </label>
											<input type="text" id="floor" name="floor" class="form-control" value="{{org.org_addr.floor}}">
										</div>
										<div class="col-lg mb-3">
											<label for="vle" class="user-select-none">หมู่บ้าน / Village: </label>
											<input type="text" id="vle" name="vle" class="form-control" value="{{org.org_addr.vle}}">
										</div>
										<div class="col-lg mb-3">
											<label for="h_no" class="user-select-none">เลขที่ / House no.: </label>
											<input type="text" id="h_no" name="h_no" class="form-control" value="{{org.org_addr.h_no}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="vle_no" class="user-select-none">หมู่ที่ / Village no.: </label>
											<input type="text" id="vle_no" name="vle_no" class="form-control" value="{{org.org_addr.vle_no}}">
										</div>
										<div class="col-lg mb-3">
											<label for="lane" class="user-select-none">ตรอก/ซอย / Lane/Alley: </label>
											<input type="text" id="lane" name="lane" class="form-control" value="{{org.org_addr.lane}}">
										</div>
										<div class="col-lg mb-3">
											<label for="road" class="user-select-none">ถนน / Road: </label>
											<input type="text" id="road" name="road" class="form-control" value="{{org.org_addr.road}}">
										</div>
										<div class="col-lg mb-3">
											<label for="sdt" class="user-select-none">แขวง/ตำบล / Sub-district: </label>
											<input type="text" id="sdt" name="sdt" class="form-control" value="{{org.org_addr.sdt}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="dt" class="user-select-none">เขต/อำเภอ / District: </label>
											<input type="text" id="dt" name="dt" class="form-control" value="{{org.org_addr.dt}}">
										</div>
										<div class="col-lg mb-3">
											<label for="pve" class="user-select-none">จังหวัด / Province/City: </label>
											<input type="text" id="pve" name="pve" class="form-control" value="{{org.org_addr.pve}}">
										</div>
										<div class="col-lg mb-3">
											<label for="cty" class="user-select-none">ประเทศ / Country: </label>
											<input type="text" id="cty" name="cty" class="form-control" value="{{org.org_addr.cty}}">
										</div>
										<div class="col-lg mb-3">
											<label for="pce" class="user-select-none">รหัสไปรษณีย์ / Post code: </label>
											<input type="text" id="pce" name="pce" class="form-control" value="{{org.org_addr.pce}}">
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="fax_no" class="user-select-none">แฟกซ์ / Fax: </label>
											<input type="text" id="fax_no" name="fax_no" class="form-control" value="{{org.fax_no}}">
										</div>
										<div class="col-lg mb-3">
											<label for="org_web" class="user-select-none">เว็บไซต์ / Website: </label>
											<input type="text" id="org_web" name="org_web" class="form-control" value="{{org.org_web}}" placeholder="ตัวอย่าง / Example: www.yourwebsite.com">
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div id="accordion_04" class="accordion">
						<div class="card">
							<div id="heading_04" class="card-header p-0 bg-danger">
								<h4 class="h4 mb-0">
									<button class="btn btn-link btn-block text-left text-decoration-none text-white" type="button" data-toggle="collapse" data-target="#collapse_04" aria-expanded="true" aria-controls="collapse_04">
										<i class="far fa-file-alt"></i>
										<span>ข้อมูลเพิ่มเติม / Additional information</span>
										<span class="clearfix">
											<div class="float-right">
												<i class="fas fa-plus"></i>
											</div>
										</span>
									</button>
								</h4>
							</div>
							<div id="collapse_04" class="collapse" aria-labelledby="heading_04" data-parent="#accordion_04">
								<div class="card-body">
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="org_ctps" class="user-select-none">ผู้ติดต่อ / Contact person: </label>
											<select id="org_ctps" class="custom-select d-block" multiple>
												<option readonly></option>
												{% for citizen_profile in citizen_profiles if citizen_profiles is defined and citizen_profiles is not empty %}
													<option value="{{citizen_profile.id}}"{% if citizen_profile.id in org_ctps %} selected{% endif %}>{{citizen_profile.name}}</option>
												{% endfor %}
											</select>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="org_facility" class="user-select-none">สิ่งอำนวยความสะดวก / Facility: </label>
											<textarea id="org_facility" name="org_facility" class="form-control">{{org.org_facility}}</textarea>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label class="user-select-none">แผนผังอาคาร / Building plan: </label>
											<div class="input-group">
												<div class="custom-file">
													<input type="file" id="bldg_plan" name="bldg_plan" class="custom-file-input" accept="image/*">
													<label class="custom-file-label" for="bldg_plan">เลือกไฟล์ / Choose file</label>
												</div>
												<div class="input-group-append">
													<button class="btn btn-secondary" type="button" onclick="empty_url('bldg_plan')"><i class="far fa-times-circle"></i></button>
												</div>
											</div>
											<div class="mt-3 mb-3">
												<img id="bldg_plan_preview" class="photo-preview w-100 mx-auto d-block"{% if org.bldg_plan != '' %} src="{{org.bldg_plan}}"{% endif %}>
											</div>
											<ul class="mb-0">
												<li><small class="form-text text-muted user-select-none">ควรตั้งชื่อไฟล์เป็นภาษาอังกฤษ / Please use file name in English.</small></li>
												<li><small class="form-text text-muted user-select-none">ท่านสามารถแนบเอกสาร ที่มีนามสกุลไฟล์ในลักษณะดังต่อไปนี้ .jpg., .png โดยขนาดไฟล์ไม่ควรเกิน 1,024 kb. / You can attachment .jpg, .png and size file should less than 1,024 kb.</small></li>
												<li><small class="form-text text-muted user-select-none">หากต้องการจะลบไฟล์แนบ ให้คลิกที่ไอคอน <i class="far fa-times-circle"></i> / If you want to delete file, you can click icon <i class="far fa-times-circle"></i></small></li>
											</ul>
										</div>
									</div>
									<div class="form-row">
										<div class="col-lg mb-3">
											<label for="other_info" class="user-select-none">ข้อมูลอื่นๆ / Other information: </label>
											<textarea id="other_info" name="other_info" class="form-control" placeholder="ลักษณะพื้นที่, สถานที่ใกล้เคียง หรือ อื่นๆ / Area information, nearby places or other">{{org.other_info}}</textarea>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="d-none invisible">
						{% if functions == 'update' %}
							<input type="hidden" name="org_id" class="form-control" value="{{org.org_id}}" readonly required>
							<input type="hidden" name="phone_no" class="form-control" value="{{org.phone_no}}" readonly required>
						{% endif %}
						<input type="hidden" name="lat" class="form-control" value="{{org.org_addr.lat}}">
						<input type="hidden" name="lon" class="form-control" value="{{org.org_addr.lon}}">
						<input type="hidden" name="org_ctps" class="form-control" value="{{org.org_ctps}}">
					</div>
				</div>
			</div>
		</div>
		{% include 'lbs/footer.html.twig' %}
		<div id="modal_confirm" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal_confirm_label" aria-hidden="true">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header bg-primary">
						{% if functions == 'create' %}
							<h5 id="modal_confirm_label" class="modal-title text-white">ยืนยันการสมัครใช้งาน / Register confirmation</h5>
						{% elseif functions == 'update' %}
							<h5 id="modal_confirm_label" class="modal-title text-white">ยืนยันการอัพเดทข้อมูล / Update confirmation</h5>
						{% endif %}
						<a type="button" class="close" data-dismiss="modal" aria-label="Close" title="ปิด">
							<span aria-hidden="true">&times;</span>
						</a>
					</div>
					<div class="modal-body d-block justify-content-start">
						<div class="clearfix">
							<div class="float-left">
								<button type="button" class="btn btn-secondary" data-dismiss="modal"><i class="fas fa-times-circle"></i> ยกเลิก / Cancel</button>
							</div>
							<div class="float-right">
								<button type="submit" class="btn btn-success"><i class="far fa-check-circle"></i> ยืนยัน / Confirm</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</form>
	{% if functions == 'create' %}
		<div id="modal_term_and_policy" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal_term_and_policy_label" aria-hidden="true">
			<div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
				<div class="modal-content">
					<div class="modal-header bg-danger">
						<h5 id="modal_term_and_policy_label" class="modal-title text-white user-select-none">ข้อกำหนดและนโยบาย / Term and policy</h5>
					</div>
					<div class="modal-body">
						{% include 'lbs/policy.html.twig' %}
					</div>
					<div class="modal-footer d-block justify-content-start">
						<div class="clearfix">
							<div class="float-left">
								<div class="custom-control custom-checkbox mt-2">
									<input type="checkbox" class="custom-control-input" id="chk_term_and_policy">
									<label class="custom-control-label" for="chk_term_and_policy">ฉันยอมรับข้อกำหนดและนโยบาย / I accept term and policy</label>
								</div>
							</div>
							<div class="float-right">
								<button type="button" id="btn_term_and_policy" class="btn btn-primary disabled" data-dismiss="modal" disabled><i class="far fa-check-circle"></i> ตกลง / Accept</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	{% endif %}
	{% include 'lbs/script.html.twig' %}
	<script type="text/javascript" src="{{base_url()}}assets/plugins/bootstrap-datetimepicker/js/moment.min.js"></script>
	<script type="text/javascript" src="{{base_url()}}assets/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
	<script type="text/javascript" src="{{base_url()}}assets/plugins/select2-4.0.13/dist/js/select2.full.min.js"></script>
	<script type="text/javascript" src="{{_MAP_SERVER}}?key={{_MAP_KEY}}"></script>
	<script type="text/javascript">
		var invalid=false;
		var map;
		var wgs84_lat=document.getElementsByName("lat")[0].value!=""?document.getElementsByName("lat")[0].value:13.7795939;
		var wgs84_lon=document.getElementsByName("lon")[0].value!=""?document.getElementsByName("lon")[0].value:100.47517769999999;
		//Example starter JavaScript for disabling form submissions if there are invalid fields
		(function(){
			'use strict'
			window.addEventListener('load',function(){
				//Fetch all the forms we want to apply custom Bootstrap validation styles to
				var forms=document.getElementsByClassName('needs-validation')
				var phone_no=document.getElementById('phone_no')
				var phone_no_fbk=document.getElementById('phone_no_fbk')
				var email=document.getElementById('email')
				var email_fbk=document.getElementById('email_fbk')
				var pwd_old=document.getElementById('pwd_old')
				var pwd_old_fbk=document.getElementById('pwd_old_fbk')
				var pwd=document.getElementById('pwd')
				var pwd_fbk=document.getElementById('pwd_fbk')
				var pwd_cfm=document.getElementById('pwd_cfm')
				var pwd_cfm_fbk=document.getElementById('pwd_cfm_fbk')
				var pwd_miss_matchs=document.getElementsByClassName('pwd-miss-match')
				//Loop over them and prevent submission
				Array.prototype.filter.call(forms,function(form){
					form.addEventListener('submit',function(event){
						if(form.checkValidity()===false||pwd.value!=pwd_cfm.value){
							event.preventDefault()
							event.stopPropagation()
							if(phone_no.value==''){
								phone_no.classList.add('is-invalid')
								phone_no.classList.remove('is-valid')
								phone_no_fbk.classList.add('d-block')
							}
							if(email.value==''){
								email.classList.add('is-invalid')
								email.classList.remove('is-valid')
								email_fbk.classList.add('d-block')
							}
							if(pwd_old&&pwd_old.value==''){
								pwd_old.classList.add('is-invalid')
								pwd_old.classList.remove('is-valid')
								pwd_old_fbk.classList.add('d-block')
							}
							if(pwd.value==''){
								pwd.classList.add('is-invalid')
								pwd.classList.remove('is-valid')
								pwd_fbk.classList.add('d-block')
							}
							if(pwd_cfm.value==''){
								pwd_cfm.classList.add('is-invalid')
								pwd_cfm.classList.remove('is-valid')
								pwd_cfm_fbk.classList.add('d-block')
							}
							if(pwd.value!=pwd_cfm.value){
								pwd.classList.add('is-invalid')
								pwd.classList.remove('is-valid')
								pwd_cfm.classList.add('is-invalid')
								pwd_cfm.classList.remove('is-valid')
								Array.prototype.filter.call(pwd_miss_matchs,function(pwd_miss_match){
									pwd_miss_match.classList.add('d-block')
								})
							}
							$('#modal_confirm').modal('hide')
							invalid=true
						}
						else{
							$('[type="submit"]').attr("disabled",true).addClass("disabled");
							$('[type="submit"]').find("svg").removeClass("fa-check-circle").addClass("fa-spin").addClass('fa-spinner');
							invalid=false
						}
						if(phone_no.value!=''){
							phone_no.classList.remove('is-invalid')
							phone_no.classList.add('is-valid')
							phone_no_fbk.classList.remove('d-block')
							invalid=false
						}
						if(email.value!=''){
							email.classList.remove('is-invalid')
							email.classList.add('is-valid')
							email_fbk.classList.remove('d-block')
							invalid=false
						}
						if(pwd_old&&pwd_old.value!=''){
							pwd_old.classList.remove('is-invalid')
							pwd_old.classList.add('is-valid')
							pwd_old_fbk.classList.remove('d-block')
							invalid=false
						}
						if(pwd.value!=''){
							pwd.classList.remove('is-invalid')
							pwd.classList.add('is-valid')
							pwd_fb.classList.remove('d-block')
						}
						if(pwd_cfm.value!=''){
							pwd_cfm.classList.remove('is-invalid')
							pwd_cfm.classList.add('is-valid')
							pwd_cf_fb.classList.remove('d-block')
						}
						if(pwd.value!=''&&pwd_cfm.value!=''&&pwd.value==pwd_cfm.value){
							pwd.classList.remove('is-invalid')
							pwd.classList.add('is-valid')
							pwd_cfm.classList.remove('is-invalid')
							pwd_cfm.classList.add('is-valid')
							Array.prototype.filter.call(pwd_m_fbs,function(pwd_m_fb){
								pwd_m_fb.classList.remove('d-block')
							})
							invalid=false
						}
						//form.classList.add('was-validated')
					},false)
				})
			},false)
		}())
		function empty_url(id){
			if(id!=''){
				$("#" + id).val(null);
				$("#" + id + "_preview").removeAttr('src');
			}
		}
		function filling_msg_txtbox(){
			map.Ui.Mouse.enableClick(false);
			if(wgs84_lat!=''&&wgs84_lon!=''){
				$.ajax({
					url:"{{addr_url}}"+wgs84_lat+'/'+wgs84_lon,
					method:"GET",
					headers:{Authorization:"bXlabkZsMWZXVFhDK2NsMWgvMm9GZz09"},
					contentType:"application/json;charset=utf-8",
					dataType:"json",
					timeout:10000,
				}).done(function(msg){
					if(msg.postcode)document.getElementById("pce").value=msg.postcode;
					if(msg.country)document.getElementById("cty").value=msg.country;
					if(msg.province)document.getElementById("pve").value=msg.province;
					if(msg.district)document.getElementById("dt").value=msg.district;
					if(msg.subdistrict)document.getElementById("sdt").value=msg.subdistrict;
					if(msg.road)document.getElementById("road").value=msg.road;
				}).fail(function(jqXHR,textStatus){

				}).always(function(){
					document.getElementsByName("lat")[0].value=wgs84_lat;
					document.getElementsByName("lon")[0].value=wgs84_lon;
					map.Ui.Mouse.enableClick(true);
				});
			}
		}
		function get_form_data($form){
			var unindexed_array=$form.serializeArray();
			var indexed_array={};
			$.map(unindexed_array,function(n,i){
				if(n['value']!=''&&n['value']!=null)
					indexed_array[n['name']]=n['value'];
			});
			return indexed_array;
		}
		function init(){
			map=new longdo.Map({layer:[longdo.Layers.GRAY_EN],placeholder:document.getElementById('map')});
			map.Ui.Crosshair.visible(false);
			map.Ui.Geolocation.visible(false);
			map.Ui.LayerSelector.visible(false);
			map.Ui.Toolbar.visible(false);
			map.Event.bind('click',function(){
				var location=map.location(longdo.LocationMode.Pointer);
				if(location){
					wgs84_lat=new Number(location.lat).toFixed(6);
					wgs84_lon=new Number(location.lon).toFixed(6);
					map.Overlays.clear().add(new longdo.Marker({lon:location.lon,lat:location.lat}));
					map.location({lon:wgs84_lon,lat:wgs84_lat},true);
					filling_msg_txtbox();
				}
			});
			map.Event.bind('overlayClick',function(){
				var location=map.location(longdo.LocationMode.Pointer);
				if(location){
					wgs84_lat=new Number(location.lat).toFixed(6);
					wgs84_lon=new Number(location.lon).toFixed(6);
					map.Overlays.clear().add(new longdo.Marker({lon:location.lon,lat:location.lat}));
					map.location({lon:wgs84_lon,lat:wgs84_lat},true);
					filling_msg_txtbox();
				}
			});
			if(navigator.geolocation){
				navigator.geolocation.getCurrentPosition(show_position);
				map.Overlays.clear().add(new longdo.Marker({lon:wgs84_lon,lat:wgs84_lat}));
				map.location({lon:wgs84_lon,lat:wgs84_lat},true).zoom(15,true);
			}
			map.Overlays.clear().add(new longdo.Marker({lon:wgs84_lon,lat:wgs84_lat}));
			map.location({lon:wgs84_lon,lat:wgs84_lat},true).zoom(15,true);
			map.Search.placeholder(document.getElementById('map_result')).language('en');
		}
		function policy_toggle(){
			$("#modal_term_and_policy").modal({
				backdrop:"static",
				focus:true,
				keyboard:false,
				show:true
			});
		}
		function read_url(input,id){
			if(input.files&&input.files[0]&&id!=''){
				var reader=new FileReader();
				reader.onload=function(event){
					$('#' + id + '_preview').attr('src',event.target.result);
				}
				reader.readAsDataURL(input.files[0]);
			}
		}
		function searching_place(){
			map.Search.search(map_search.value,{
				area:document.getElementById('map_area').value,
				tag:document.getElementById('map_tag').value,
				span:document.getElementById('map_span').value,
				limit:document.getElementById('map_limit').value
			});
		}
		function show_position(position) {
			wgs84_lat=position.coords.latitude;
			wgs84_lon=position.coords.longitude;
		}
		map_search.onkeypress=function(e){
			if(map_search.value.length>=3&&e.keyCode==13)
				searching_place();
		}
		map_submit.onclick=function(){
			if(map_search.value.length>=3)
				searching_place();
		}
		$(function(){
			$('[data-toggle="collapse"]').on("click",function(){
				$(this).find("svg").eq(1).toggleClass("fa-minus fa-plus");
			});
			$("#chk_term_and_policy").on("change",function(){
				if($(this).prop("checked")==true){
					$("#btn_term_and_policy").attr("disabled",false).removeClass("disabled");
				}
				else if($(this).prop("checked")==false){
					$("#btn_term_and_policy").attr("disabled",true).addClass("disabled");
				}
			});
			$("#org_logo").change(function(){
				read_url(this,'org_logo');
			});
			$("#bldg_plan").change(function(){
				read_url(this,'bldg_plan');
			});
			$(".datetimepicker.left.bottom").datetimepicker({
				format:"DD/MM/YYYY",
				useCurrent:false,
				widgetPositioning:{
					horizontal:"left",
					vertical:"bottom",
				},
			});
			$(".datetimepicker.left.top").datetimepicker({
				format:"DD/MM/YYYY",
				useCurrent:false,
				widgetPositioning:{
					horizontal:"left",
					vertical:"top",
				},
			});
			$(".datetimepicker").on('keydown keypress keyup',function(event){
				event.preventDefault();
			});
			$("#bsn_type").select2({
				allowClear:true,
				placeholder:"เลือกประเภท / Select type",
				theme:"bootstrap4"
			});
			$("#estbm_year").select2({
				allowClear:true,
				placeholder:"เลือกปี / Select year",
				theme:"bootstrap4"
			});
			$("#org_ctps").select2({
				allowClear:true,
				placeholder:"เลือกผู้ติดต่อ / Select contact person",
				theme:"bootstrap4"
			});
			$("#org_ctps").on('change',function(event){
				$('[name="org_ctps"]').val($(this).val());
			});
			$("#collapse_03").on("shown.bs.collapse",function(event){
				init();
			});
		});
	</script>
</body>
</html>